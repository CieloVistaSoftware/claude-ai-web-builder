<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Claude AI Web Builder</title>

    <!-- Favicon -->
    <link rel="icon" href="/images/ziasymbol.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/images/ziasymbol.svg" />

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Create professional websites with advanced layouts, themes, and animations"
    />
    <meta
      name="keywords"
      content="website, template, professional, glassmorphism, animation"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="wb.css" />
    <link rel="stylesheet" href="../components/color-control-panel/color-control-panel.css" />

    <!-- Status Bar Styles -->
   
  </head>
  <body data-layout="top-nav" data-theme="dark" data-footer="same-page">
    <!-- Color Control Panel Component -->
    <div id="color-control-panel-container"></div>

    <!-- Main Website -->
    <div id="site-container" class="site-container">
      <!-- Navigation -->
      <nav id="site-nav" class="site-nav">
        <ul id="nav-list" class="nav-list">
          <li id="nav-item-1">
            <a id="nav-link-1" href="#home" class="nav-link">Home</a>
          </li>
          <li id="nav-item-2">
            <a id="nav-link-2" href="#about" class="nav-link">About</a>
          </li>
          <li id="nav-item-3">
            <a id="nav-link-3" href="#services" class="nav-link">Services</a>
          </li>
          <li id="nav-item-4">
            <a id="nav-link-4" href="#portfolio" class="nav-link">Portfolio</a>
          </li>
          <li id="nav-item-5">
            <a id="nav-link-5" href="#contact" class="nav-link">Contact</a>
          </li>
        </ul>
      </nav>

      <!-- Main Content -->
      <main id="main-content" class="main-content">
        <!-- Header -->
        <header id="site-header" class="site-header" data-media-tip="Click to add header background">
          <h1
            id="site-title"
            class="site-title editable"
            contenteditable="false"
            data-media-tip="Click to add logo or title image"
          >
            Your Amazing Website
          </h1>
          <p
            id="site-subtitle"
            class="site-subtitle editable"
            contenteditable="false"
          >
            Build something beautiful today
          </p>
        </header>

        <!-- Hero Section -->
        <section id="hero-section" class="hero-section" data-media-tip="Click to add background image">
          <div id="hero-content" class="hero-content">
            <h2
              id="hero-title"
              class="hero-title editable"
              contenteditable="false"
              data-media-tip="Click to add title background"
            >
              Welcome to the Future
            </h2>
            <p
              id="hero-description"
              class="hero-description editable"
              contenteditable="false"
            >
              Create stunning websites with our powerful template generator. No
              coding required.
            </p>
            <button
              id="cta-button"
              class="cta-button editable"
              contenteditable="false"
            >
              Get Started
            </button>
          </div>
        </section>

        <!-- Features Section -->
        <section id="features-section" class="content-section">
          <h2
            id="features-title"
            class="section-title editable"
            contenteditable="false"
          >
            Features
          </h2>
          <div id="features-grid" class="content-grid">
            <div id="feature-card-1" class="content-card" data-media-tip="Click to add card background">
              <span id="feature-icon-1" class="card-icon" data-media-tip="Click to replace with image icon">üöÄ</span>
              <h3
                id="feature-title-1"
                class="card-title editable"
                contenteditable="false"
              >
                Lightning Fast
              </h3>
              <p
                id="feature-desc-1"
                class="card-description editable"
                contenteditable="false"
              >
                Built for speed and performance. Your website will load
                instantly.
              </p>
            </div>
            <div id="feature-card-2" class="content-card" data-media-tip="Click to add card background">
              <span id="feature-icon-2" class="card-icon" data-media-tip="Click to replace with image icon">üé®</span>
              <h3
                id="feature-title-2"
                class="card-title editable"
                contenteditable="false"
              >
                Beautiful Design
              </h3>
              <p
                id="feature-desc-2"
                class="card-description editable"
                contenteditable="false"
              >
                Choose from multiple themes and customize every aspect of your
                site.
              </p>
            </div>
            <div id="feature-card-3" class="content-card" data-media-tip="Click to add card background">
              <span id="feature-icon-3" class="card-icon" data-media-tip="Click to replace with image icon">üì±</span>
              <h3
                id="feature-title-3"
                class="card-title editable"
                contenteditable="false"
              >
                Fully Responsive
              </h3>
              <p
                id="feature-desc-3"
                class="card-description editable"
                contenteditable="false"
              >
                Looks perfect on all devices, from mobile phones to desktop
                computers.
              </p>
            </div>
          </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery-section" class="content-section">
          <h2
            id="gallery-title"
            class="section-title editable"
            contenteditable="false"
          >
            Gallery
          </h2>            <div id="gallery-grid" class="content-grid">
              <div id="gallery-item-1" class="media-placeholder">
                <span id="gallery-text-1">Click to add media</span>
              </div>
              <div id="gallery-item-2" class="media-placeholder">
                <span id="gallery-text-2">Click to add media</span>
              </div>
              <div id="gallery-item-3" class="media-placeholder">
                <span id="gallery-text-3">Click to add media</span>
              </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about-section" class="content-section" data-media-tip="Click to add section background">
          <h2
            id="about-title"
            class="section-title editable"
            contenteditable="false"
          >
            About Us
          </h2>
          <div id="about-card" class="content-card" data-media-tip="Click to add card background">
            <p
              id="about-description"
              class="card-description editable"
              contenteditable="false"
            >
              We are passionate about creating beautiful, functional websites
              that help businesses grow. Our template generator makes it easy
              for anyone to build a professional website without any coding
              knowledge.
            </p>
          </div>
        </section>
      </main>
    </div>

    <!-- Footer - Last element of the website -->
    <footer id="site-footer" class="site-footer">
        <div id="footer-content" class="footer-content">
          <p id="footer-copyright" class="editable" contenteditable="false">
            &copy; 2024 Your Company. All rights reserved.
          </p>
          <ul id="footer-links" class="footer-links">
            <li id="footer-item-1">
              <a id="footer-link-1" href="#privacy" class="footer-link"
                >Privacy Policy</a
              >
            </li>
            <li id="footer-item-2">
              <a id="footer-link-2" href="#terms" class="footer-link"
                >Terms of Service</a
              >
            </li>
            <li id="footer-item-3">
              <a id="footer-link-3" href="#contact" class="footer-link"
                >Contact</a
              >
            </li>
          </ul>
        </div>
      </footer>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
      <div id="status-message" class="status-message">Ready to edit</div>
      <div id="status-info"></div>
    </div>

    <!-- Media Browser Modal -->
    <div id="media-browser-modal" class="media-browser-modal">
      <div class="media-browser-content">
        <div class="media-browser-header">
          <h3 class="media-browser-title">Select Image File</h3>
          <button class="media-browser-close" onclick="closeMediaBrowser()">&times;</button>
        </div>
        
        <div class="file-browser-nav">
          <div class="nav-breadcrumb" id="nav-breadcrumb">
            <span class="nav-breadcrumb-item" onclick="navigateToFolder('')">images</span>
          </div>
        </div>
        
        <div class="file-browser" id="file-browser">
          <!-- File items will be loaded here -->
        </div>
        
        <div class="media-browser-actions">
          <button class="media-browser-btn secondary" onclick="closeMediaBrowser()">Cancel</button>
          <button class="media-browser-btn primary" onclick="selectMedia()" id="select-media-btn" disabled>Select File</button>
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script src="wb.js"></script>
    <script src="../components/color-control-panel/color-control-panel.js"></script>

    <!-- Status Bar Script -->
    <script>
      // Status bar utility functions
      window.updateStatus = function (message, type = "info") {
        const statusMessage = document.getElementById("status-message");

        // Remove all status classes
        statusMessage.classList.remove("success", "error", "warning", "info");

        // Add the appropriate class
        statusMessage.classList.add(type);

        // Set the message
        statusMessage.textContent = message;

        console.log(`Status: [${type}] ${message}`);
      };

      // Initialize status bar
      document.addEventListener("DOMContentLoaded", function () {
        updateStatus("Website Builder loaded - Ready to edit", "success");
        document.getElementById("status-info").textContent = "Edit mode: OFF";
        
        // Load color control panel component
        loadColorControlPanelComponent();
        
        // Initialize change tracking
        initializeChangeTracking();
        
        // Initialize media browser
        initializeMediaBrowser();
        
        // Initialize scroll wheel image resizing
        initializeImageScrollResize();
      });
      
      // Load Color Control Panel Component
      async function loadColorControlPanelComponent() {
        try {
          const response = await fetch('../components/color-control-panel/color-control-panel.html');
          const html = await response.text();
          
          const container = document.getElementById('color-control-panel-container');
          container.innerHTML = html;
          
          // Initialize the component
          const controlPanel = container.querySelector('.control-panel');
          if (controlPanel) {
            controlPanel.id = 'control-panel';
            window.colorControlPanel = new ColorControlPanel('control-panel');
            updateStatus('Color Control Panel component loaded successfully', 'success');
          }
        } catch (error) {
          console.error('Failed to load color control panel component:', error);
          updateStatus('Failed to load control panel component', 'error');
        }
      }

      // Image Scroll Resize Functionality
      function initializeImageScrollResize() {
        // Add scroll wheel listeners to all images
        document.addEventListener('wheel', handleImageScrollResize, { passive: false });
        
        // Make existing images scroll-resizable and add indicators
        makeImagesScrollResizable();
        
        // Watch for new images added via media browser
        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            mutation.addedNodes.forEach(function(node) {
              if (node.nodeType === 1) { // Element node
                if (node.tagName === 'IMG') {
                  makeImageScrollResizable(node);
                } else {
                  // Check for images within added elements
                  const images = node.querySelectorAll ? node.querySelectorAll('img') : [];
                  images.forEach(makeImageScrollResizable);
                }
              }
            });
          });
        });
        
        observer.observe(document.body, {
          childList: true,
          subtree: true
        });
      }
      
      function makeImagesScrollResizable() {
        const images = document.querySelectorAll('img');
        images.forEach(makeImageScrollResizable);
      }
      
      function makeImageScrollResizable(img) {
        if (img.classList.contains('scroll-resizable')) return;
        
        img.classList.add('scroll-resizable');
        
        // Add resize indicator
        const indicator = document.createElement('div');
        indicator.className = 'image-resize-indicator';
        indicator.textContent = 'üîç Scroll to resize';
        
        // Make parent position relative if needed
        const parent = img.parentElement;
        const parentStyle = getComputedStyle(parent);
        if (parentStyle.position === 'static') {
          parent.style.position = 'relative';
        }
        
        parent.appendChild(indicator);
        
        // Store original dimensions
        if (!img.dataset.originalWidth) {
          img.addEventListener('load', function() {
            img.dataset.originalWidth = img.naturalWidth || img.offsetWidth;
            img.dataset.originalHeight = img.naturalHeight || img.offsetHeight;
          });
          
          // If already loaded
          if (img.complete) {
            img.dataset.originalWidth = img.naturalWidth || img.offsetWidth;
            img.dataset.originalHeight = img.naturalHeight || img.offsetHeight;
          }
        }
      }
      
      function handleImageScrollResize(e) {
        const target = e.target;
        
        // Only handle scroll on images with scroll-resizable class
        if (!target.classList.contains('scroll-resizable')) return;
        
        e.preventDefault();
        
        const delta = e.deltaY;
        const scaleFactor = 0.1;
        
        // Get current dimensions
        const currentWidth = target.offsetWidth;
        const originalWidth = parseInt(target.dataset.originalWidth) || currentWidth;
        
        // Calculate new scale
        let currentScale = currentWidth / originalWidth;
        
        if (delta < 0) {
          // Scroll up - increase size
          currentScale = Math.min(currentScale + scaleFactor, 3.0); // Max 300%
        } else {
          // Scroll down - decrease size
          currentScale = Math.max(currentScale - scaleFactor, 0.3); // Min 30%
        }
        
        // Apply new size
        const newWidth = originalWidth * currentScale;
        const newHeight = (parseInt(target.dataset.originalHeight) || target.offsetHeight) * currentScale;
        
        target.style.width = newWidth + 'px';
        target.style.height = newHeight + 'px';
        target.style.maxWidth = 'none'; // Override max-width constraints
        
        // Update status with current scale
        const percentage = Math.round(currentScale * 100);
        updateStatus(`Image resized to ${percentage}% (${Math.round(newWidth)}x${Math.round(newHeight)}px)`, 'info');
        
        // Mark as changed
        markAsChanged();
      }



      // Media Browser Functionality
      let currentMediaTarget = null;
      let selectedFile = null;
      let currentPath = '';
      
      // File system structure for the images folder
      const fileSystem = {
        '': {
          folders: ['css', 'ads'],
          files: [
            { name: 'ziasymbol.svg', type: 'image', size: '2.3 KB' },
            { name: 'redsample.png', type: 'image', size: '15.2 KB' },
            { name: 'bluesample.png', type: 'image', size: '14.8 KB' },
            { name: 'pinksample.png', type: 'image', size: '16.1 KB' },
            { name: 'purplesample.png', type: 'image', size: '15.9 KB' },
            { name: 'greenleftsample.png', type: 'image', size: '18.3 KB' },
            { name: 'SkyBlueTopSample.png', type: 'image', size: '17.4 KB' },
            { name: 'YellowLeftSample.png', type: 'image', size: '16.8 KB' },
            { name: 'YellowTopSample.png', type: 'image', size: '17.2 KB' },
            { name: 'dynamic-page-navigation-failure.png', type: 'image', size: '45.2 KB' },
            { name: 'footer-position-change-failure.png', type: 'image', size: '38.7 KB' },
            { name: 'footer-visibility-toggle-failure.png', type: 'image', size: '42.1 KB' },
            { name: 'navigation-test-failure.png', type: 'image', size: '41.3 KB' }
          ]
        },
        'css': {
          folders: ['themes'],
          files: []
        },
        'css/themes': {
          folders: [],
          files: [
            { name: 'dark-theme-bg.jpg', type: 'image', size: '125.4 KB' },
            { name: 'light-theme-bg.jpg', type: 'image', size: '98.7 KB' },
            { name: 'ocean-theme-bg.jpg', type: 'image', size: '156.2 KB' },
            { name: 'sunset-theme-bg.jpg', type: 'image', size: '132.8 KB' }
          ]
        },
        'ads': {
          folders: [],
          files: [
            { name: 'banner-ad.jpg', type: 'image', size: '28.5 KB' },
            { name: 'sidebar-ad.png', type: 'image', size: '12.3 KB' }
          ]
        }
      };
      
      function initializeMediaBrowser() {
        // Create hidden file input for native file picker with folder access
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.png,.jpg,.jpeg,.gif,.svg,.webp,.bmp';
        fileInput.style.display = 'none';
        fileInput.id = 'hidden-file-input';
        fileInput.webkitdirectory = false; // Allow file selection, not directory
        fileInput.multiple = false; // Single file selection
        document.body.appendChild(fileInput);
        
        // Add click handlers to all elements with data-media-tip in edit mode
        document.addEventListener('click', function(e) {
          const target = e.target.closest('[data-media-tip]');
          if (target && document.body.classList.contains('edit-mode')) {
            e.preventDefault();
            e.stopPropagation();
            openNativeFilePicker(target);
          }
        });
        
        // Handle file selection
        fileInput.addEventListener('change', function(e) {
          if (e.target.files.length > 0) {
            handleFileSelection(e.target.files[0]);
          }
        });
      }
      
      function openNativeFilePicker(target) {
        currentMediaTarget = target;
        
        // Set up file input to prioritize PNG files
        const fileInput = document.getElementById('hidden-file-input');
        
        // Reset any previous value
        fileInput.value = '';
        
        // Trigger the file picker dialog
        fileInput.click();
        
        updateStatus('Browse folders and select a PNG image (or other image types)', 'info');
      }
      
      function handleFileSelection(file) {
        if (!currentMediaTarget) return;
        
        // Validate file type
        if (!file.type.startsWith('image/')) {
          updateStatus('Please select a valid image file', 'error');
          return;
        }
        
        // Create object URL for the selected file
        const imageUrl = URL.createObjectURL(file);
        const tip = currentMediaTarget.getAttribute('data-media-tip');
        
        // Apply the image based on the tip type
        if (tip.includes('background')) {
          // Set as background image
          currentMediaTarget.style.backgroundImage = `url('${imageUrl}')`;
          currentMediaTarget.style.backgroundSize = 'cover';
          currentMediaTarget.style.backgroundPosition = 'center';
          currentMediaTarget.classList.add('has-media-background');
        } else if (tip.includes('logo') || tip.includes('icon')) {
          // Replace content with image
          const img = document.createElement('img');
          img.src = imageUrl;
          img.alt = file.name;
          img.style.maxWidth = '100%';
          img.style.height = 'auto';
          currentMediaTarget.innerHTML = '';
          currentMediaTarget.appendChild(img);
          currentMediaTarget.classList.add('element-transformed-to-media');
          
          // Make the new image scroll-resizable
          setTimeout(() => makeImageScrollResizable(img), 100);
        }
        
        // Mark as changed
        markAsChanged();
        updateStatus(`Image "${file.name}" applied successfully`, 'success');
        
        // Reset current target
        currentMediaTarget = null;
      }
      
      function closeMediaBrowser() {
        document.getElementById('media-browser-modal').classList.remove('show');
        currentMediaTarget = null;
        selectedFile = null;
        currentPath = '';
      }
      
      function loadDirectory(path) {
        const browser = document.getElementById('file-browser');
        browser.innerHTML = '';
        
        const directory = fileSystem[path];
        if (!directory) {
          browser.innerHTML = '<div class="file-item">Directory not found</div>';
          return;
        }
        
        // Add parent directory link if not in root
        if (path !== '') {
          const parentPath = path.includes('/') ? path.substring(0, path.lastIndexOf('/')) : '';
          const parentItem = createFileItem('..', 'folder', '', true, parentPath);
          browser.appendChild(parentItem);
        }
        
        // Add folders
        directory.folders.forEach(folderName => {
          const folderPath = path === '' ? folderName : `${path}/${folderName}`;
          const folderItem = createFileItem(folderName, 'folder', '', false, folderPath);
          browser.appendChild(folderItem);
        });
        
        // Add files
        directory.files.forEach(file => {
          const filePath = path === '' ? file.name : `${path}/${file.name}`;
          const fileItem = createFileItem(file.name, file.type, file.size, false, filePath);
          browser.appendChild(fileItem);
        });
      }
      
      function createFileItem(name, type, size, isParent, fullPath) {
        const item = document.createElement('div');
        item.className = 'file-item';
        
        const icon = document.createElement('div');
        icon.className = 'file-icon';
        
        if (isParent) {
          icon.textContent = '‚Ü∞';
          item.onclick = () => navigateToFolder(fullPath);
        } else if (type === 'folder') {
          icon.textContent = 'üìÅ';
          item.onclick = () => navigateToFolder(fullPath);
        } else {
          icon.textContent = 'üñºÔ∏è';
          item.onclick = () => selectFileItem(item, fullPath);
        }
        
        const info = document.createElement('div');
        info.className = 'file-info';
        
        const fileName = document.createElement('div');
        fileName.className = 'file-name';
        fileName.textContent = name;
        
        const fileDetails = document.createElement('div');
        fileDetails.className = 'file-details';
        
        if (isParent) {
          fileDetails.textContent = 'Parent directory';
        } else if (type === 'folder') {
          fileDetails.textContent = 'Folder';
        } else {
          fileDetails.textContent = `Image ‚Ä¢ ${size}`;
        }
        
        info.appendChild(fileName);
        info.appendChild(fileDetails);
        item.appendChild(icon);
        item.appendChild(info);
        
        // Add preview for image files
        if (type === 'image') {
          const preview = document.createElement('img');
          preview.className = 'file-preview';
          preview.src = `/images/${fullPath}`;
          preview.alt = name;
          preview.onerror = () => {
            preview.style.display = 'none';
          };
          item.appendChild(preview);
        }
        
        return item;
      }
      
      function navigateToFolder(path) {
        currentPath = path;
        selectedFile = null;
        document.getElementById('select-media-btn').disabled = true;
        loadDirectory(path);
        updateBreadcrumb(path);
      }
      
      function updateBreadcrumb(path) {
        const breadcrumb = document.getElementById('nav-breadcrumb');
        breadcrumb.innerHTML = '';
        
        const parts = path === '' ? ['images'] : ['images', ...path.split('/')];
        
        parts.forEach((part, index) => {
          if (index > 0) {
            const separator = document.createElement('span');
            separator.className = 'nav-breadcrumb-separator';
            separator.textContent = ' / ';
            breadcrumb.appendChild(separator);
          }
          
          const item = document.createElement('span');
          item.className = 'nav-breadcrumb-item';
          item.textContent = part;
          
          if (index === 0) {
            item.onclick = () => navigateToFolder('');
          } else {
            const clickPath = parts.slice(1, index + 1).join('/');
            item.onclick = () => navigateToFolder(clickPath);
          }
          
          breadcrumb.appendChild(item);
        });
      }
      
      function selectFileItem(item, filePath) {
        // Remove previous selection
        document.querySelectorAll('.file-item').forEach(i => i.classList.remove('selected'));
        
        // Select current item
        item.classList.add('selected');
        selectedFile = filePath;
        
        // Enable select button
        document.getElementById('select-media-btn').disabled = false;
        updateStatus(`Selected: ${filePath}`, 'info');
      }
      
      function selectMedia() {
        if (!selectedFile || !currentMediaTarget) return;
        
        const imagePath = `/images/${selectedFile}`;
        const tip = currentMediaTarget.getAttribute('data-media-tip');
        
        // Apply the image based on the tip type
        if (tip.includes('background')) {
          // Set as background image
          currentMediaTarget.style.backgroundImage = `url('${imagePath}')`;
          currentMediaTarget.style.backgroundSize = 'cover';
          currentMediaTarget.style.backgroundPosition = 'center';
          currentMediaTarget.classList.add('has-media-background');
        } else if (tip.includes('logo') || tip.includes('icon')) {
          // Replace content with image
          const img = document.createElement('img');
          img.src = imagePath;
          img.alt = selectedFile;
          img.style.maxWidth = '100%';
          img.style.height = 'auto';
          currentMediaTarget.innerHTML = '';
          currentMediaTarget.appendChild(img);
          currentMediaTarget.classList.add('element-transformed-to-media');
          
          // Make the new image scroll-resizable
          setTimeout(() => makeImageScrollResizable(img), 100);
        }
        
        // Mark as changed and close browser
        markAsChanged();
        closeMediaBrowser();
        updateStatus(`Image ${selectedFile} applied successfully`, 'success');
      }

      // Change tracking functionality
      let hasUnsavedChanges = false;
      
      function initializeChangeTracking() {
        const saveBtn = document.getElementById('save-btn');
        
        // Monitor all editable elements for changes
        const editableElements = document.querySelectorAll('.editable');
        editableElements.forEach(element => {
          element.addEventListener('input', markAsChanged);
          element.addEventListener('blur', markAsChanged);
        });
        
        // Monitor control panel changes
        const controls = document.querySelectorAll('select, input[type="color"], input[type="range"], .color-fine-btn');
        controls.forEach(control => {
          control.addEventListener('change', markAsChanged);
          control.addEventListener('input', markAsChanged);
          if (control.classList.contains('color-fine-btn')) {
            control.addEventListener('click', markAsChanged);
          }
        });
        
        // Monitor edit mode toggle
        const editModeToggle = document.getElementById('edit-mode-toggle');
        if (editModeToggle) {
          editModeToggle.addEventListener('click', function() {
            markAsChanged();
            // Update status info when edit mode changes
            setTimeout(() => {
              const isEditMode = document.body.classList.contains('edit-mode');
              document.getElementById('status-info').textContent = `Edit mode: ${isEditMode ? 'ON' : 'OFF'}`;
              if (isEditMode) {
                updateStatus('Edit mode active - Click on highlighted elements to add images', 'info');
              } else {
                updateStatus('Edit mode disabled', 'success');
              }
            }, 100);
          });
        }
      }
      
      function markAsChanged() {
        if (!hasUnsavedChanges) {
          hasUnsavedChanges = true;
          showSaveButton();
          updateStatus("Changes detected - Click Save to preserve changes", "warning");
        }
      }
      
      function markAsSaved() {
        hasUnsavedChanges = false;
        hideSaveButton();
        updateStatus("Changes saved successfully", "success");
      }
      
      function showSaveButton() {
        const saveBtn = document.getElementById('save-btn');
        saveBtn.classList.remove('save-btn-hidden');
        saveBtn.classList.add('save-btn-visible');
      }
      
      function hideSaveButton() {
        const saveBtn = document.getElementById('save-btn');
        saveBtn.classList.remove('save-btn-visible');
        saveBtn.classList.add('save-btn-hidden');
      }

      // Save button functionality is now handled by wb.js
      document.getElementById('save-btn').addEventListener('click', function() {
        // This is just a stub - actual save functionality is in wb.js
        console.log('Save button clicked - functionality handled by wb.js');
        
        // Mark as saved after successful save
        markAsSaved();
      });
    </script>
  </body>
</html>
