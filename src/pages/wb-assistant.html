<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WB Framework AI Assistant</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; }
        #root { width: 100vw; height: 100vh; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        
        // Lucide icons as inline SVGs
        const Send = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>;
        const Book = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>;
        const Code = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>;
        const Lightbulb = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="9" y1="18" x2="15" y2="18"></line><line x1="10" y1="22" x2="14" y2="22"></line><path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14"></path></svg>;
        const FileText = ({size}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>;
        const Loader = ({size, className}) => <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line></svg>;

        // Knowledge base
        const knowledgeBase = [
          {
            id: 'overview',
            title: 'WB Framework Overview',
            content: 'WB is a comprehensive web development framework featuring 41+ custom web components, wave-based color harmony, and reactive architecture. All components are prefixed with wb- (wb-nav, wb-color-harmony, wb-control-panel, etc.). The framework uses ES6 modules only, WebSockets for backend communication, and follows CSS-first architecture.',
            keywords: ['overview', 'introduction', 'what is', 'framework', 'components']
          },
          {
            id: 'creating',
            title: 'Creating Components',
            content: 'To create a new WB component: 1) Create folder in ../..../components/wb-name/, 2) Create wb-name.js extending WBBaseComponent, 3) Create wb-name.css for styles, 4) Create demo.html with examples, 5) Create claude.md for documentation. Always extend WBBaseComponent, never HTMLElement.',
            keywords: ['create', 'new', 'component', 'how to']
          }
        ];

        const WBFrameworkAssistant = () => {
          const [messages, setMessages] = useState([{
            role: 'assistant',
            content: 'Hello! I\'m your WB Framework AI Assistant.\n\nðŸ“š **Documentation** - Learn about components\nðŸ’» **Code Examples** - Get working samples\nðŸŽ¨ **Color System** - Wave-based harmony\n\nWhat would you like to know?'
          }]);
          const [input, setInput] = useState('');
          const [loading, setLoading] = useState(false);
          const messagesEndRef = useRef(null);

          useEffect(() => {
            messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
          }, [messages]);

          const markdownToHtml = (md) => {
            return md
              .replace(/```(\w+)?\n([\s\S]*?)```/g, '<pre style="background:#1e1e2e;padding:15px;borderRadius:8px;overflow-x:auto;margin:10px 0;border:1px solid #3f3f46"><code style="color:#e4e4e7;fontSize:14px;fontFamily:monospace">$2</code></pre>')
              .replace(/`([^`]+)`/g, '<code style="background:rgba(0,0,0,0.3);padding:2px 6px;borderRadius:4px;fontSize:14px;color:#a78bfa">$1</code>')
              .replace(/\*\*(.+?)\*\*/g, '<strong style="color:#a78bfa">$1</strong>')
              .replace(/\n\n/g, '<br/><br/>').replace(/\n/g, '<br/>');
          };

          const searchKnowledge = (query) => {
            const lower = query.toLowerCase();
            return knowledgeBase.filter(doc => 
              doc.keywords.some(k => lower.includes(k)) ||
              doc.title.toLowerCase().includes(lower)
            ).slice(0, 2);
          };

          const handleSend = async () => {
            if (!input.trim() || loading) return;
            const userMsg = input.trim();
            setInput('');
            setMessages(prev => [...prev, { role: 'user', content: userMsg }]);
            setLoading(true);

            const docs = searchKnowledge(userMsg);
            const context = docs.map(d => d.content).join('\n\n');
            
            try {
              const response = await fetch("https://api.anthropic.com/v1/messages", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                  model: "claude-sonnet-4-20250514",
                  max_tokens: 1500,
                  messages: [{
                    role: "user",
                    content: `You are a WB Framework expert. Answer using this context:\n\n${context}\n\nQuestion: ${userMsg}\n\nProvide a clear answer with code examples if relevant. Use markdown formatting.`
                  }]
                })
              });
              const data = await response.json();
              setMessages(prev => [...prev, { role: 'assistant', content: data.content[0].text }]);
            } catch (error) {
              setMessages(prev => [...prev, { role: 'assistant', content: docs[0]?.content || 'Sorry, I encountered an error.' }]);
            } finally {
              setLoading(false);
            }
          };

          return (
            <div style={{ display: 'flex', flexDirection: 'column', height: '100vh', background: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)', fontFamily: 'system-ui' }}>
              <div style={{ background: 'rgba(30,30,46,0.95)', padding: '20px 30px', borderBottom: '1px solid rgba(255,255,255,0.1)' }}>
                <h1 style={{ margin: 0, fontSize: '24px', background: 'linear-gradient(135deg, #667eea 0%, #a78bfa 100%)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', display: 'flex', alignItems: 'center', gap: '10px' }}>
                  <Code size={28} /> WB Framework AI Assistant
                </h1>
                <p style={{ margin: '5px 0 0 0', color: '#a1a1aa', fontSize: '14px' }}>41+ Components â€¢ Wave-Based Colors</p>
              </div>
              
              <div style={{ flex: 1, overflowY: 'auto', padding: '20px', display: 'flex', flexDirection: 'column', gap: '15px' }}>
                {messages.map((msg, idx) => (
                  <div key={idx} style={{ display: 'flex', justifyContent: msg.role === 'user' ? 'flex-end' : 'flex-start' }}>
                    <div style={{ maxWidth: '80%', padding: '15px 20px', borderRadius: msg.role === 'user' ? '20px 20px 5px 20px' : '20px 20px 20px 5px', background: msg.role === 'user' ? 'linear-gradient(135deg, #667eea 0%, #a78bfa 100%)' : 'rgba(30,30,46,0.95)', color: msg.role === 'user' ? 'white' : '#e4e4e7', boxShadow: '0 2px 10px rgba(0,0,0,0.3)' }}>
                      <div dangerouslySetInnerHTML={{ __html: markdownToHtml(msg.content) }} />
                    </div>
                  </div>
                ))}
                {loading && (
                  <div style={{ display: 'flex', justifyContent: 'flex-start' }}>
                    <div style={{ padding: '15px 20px', borderRadius: '20px 20px 20px 5px', background: 'rgba(30,30,46,0.95)', display: 'flex', alignItems: 'center', gap: '10px' }}>
                      <Loader size={16} className="spin" />
                      <span style={{ color: '#a1a1aa' }}>Thinking...</span>
                    </div>
                  </div>
                )}
                <div ref={messagesEndRef} />
              </div>
              
              <div style={{ padding: '20px', background: 'rgba(30,30,46,0.95)', borderTop: '1px solid rgba(255,255,255,0.1)' }}>
                <div style={{ display: 'flex', gap: '10px', maxWidth: '1200px', margin: '0 auto' }}>
                  <input
                    type="text"
                    value={input}
                    onChange={(e) => setInput(e.target.value)}
                    onKeyPress={(e) => e.key === 'Enter' && handleSend()}
                    placeholder="Ask about WB components..."
                    disabled={loading}
                    style={{ flex: 1, padding: '15px 20px', fontSize: '15px', border: '2px solid #3f3f46', borderRadius: '12px', outline: 'none', background: '#27272a', color: '#e4e4e7' }}
                  />
                  <button onClick={handleSend} disabled={loading || !input.trim()} style={{ padding: '15px 25px', background: loading || !input.trim() ? '#3f3f46' : 'linear-gradient(135deg, #667eea 0%, #a78bfa 100%)', color: 'white', border: 'none', borderRadius: '12px', cursor: loading || !input.trim() ? 'not-allowed' : 'pointer', display: 'flex', alignItems: 'center', gap: '8px', fontSize: '15px', fontWeight: '600' }}>
                    <Send size={18} /> Send
                  </button>
                </div>
              </div>
              
              <style>{`@keyframes spin { to { transform: rotate(360deg); } } .spin { animation: spin 1s linear infinite; }`}</style>
            </div>
          );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<WBFrameworkAssistant />);
    </script>
</body>
</html>








