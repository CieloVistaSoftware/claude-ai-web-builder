<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WB Color Bars Component Demo</title>
    
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="./wb-color-bars.css">
    
    <script type="module" src="../wb-demo/wb-demo.js"></script>
    <script type="module" src="../wb-button/wb-button.js"></script>
    <script type="module" src="../wb-event-log/wb-event-log.js"></script>
    <script type="module" src="./wb-color-bars.js"></script>
</head>
<body style="margin: 0; padding: 1rem; background: var(--surface-900);">
    
    <wb-demo title="WB Color Bars Component" style="width: 95vw; margin: 0 auto;">
        <div slot="description">
            <p>The <code>&lt;wb-color-bars&gt;</code> component provides a complete HSL color picker 
            with separate controls for text color and background color.</p>
        </div>
        
        <div slot="examples" style="padding: 1rem;">

            <!-- Basic Usage -->
            <wb-demo-section>
                <h2>üé® Complete Color Picker</h2>
                <p>Switch between text and background color modes to pick colors.</p>
                <div style="max-width: 500px;">
                    <wb-color-bars 
                        id="main-picker"
                        text-hue="200" 
                        text-saturation="80" 
                        text-lightness="85"
                        bg-hue="220" 
                        bg-saturation="30" 
                        bg-lightness="15">
                    </wb-color-bars>
                </div>
                <wb-demo-output id="picker-output">Select colors using the sliders</wb-demo-output>
            </wb-demo-section>

            <!-- Semantic Elements Live Color Demo -->
            <wb-demo-section>
                <h2>üî§ Semantic Elements Live Color Demo</h2>
                <p>The semantic elements below update their text and background color in real time as you move the sliders above.</p>
                <div style="max-width: 700px; margin-bottom: 1rem;">
                    <wb-semantic-elements id="semantic-demo"></wb-semantic-elements>
                </div>
            </wb-demo-section>

            <!-- Preset Colors -->
            <wb-demo-section>
                <h2>üñåÔ∏è Preset Color Schemes</h2>
                <p>Click a preset to apply it instantly.</p>
                
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem;">
                    <wb-button variant="primary" onclick="applyPreset('ocean')">üåä Ocean</wb-button>
                    <wb-button variant="success" onclick="applyPreset('forest')">üå≤ Forest</wb-button>
                    <wb-button variant="warning" onclick="applyPreset('sunset')">üåÖ Sunset</wb-button>
                    <wb-button variant="danger" onclick="applyPreset('berry')">üçá Berry</wb-button>
                    <wb-button variant="secondary" onclick="applyPreset('mono')">‚ö´ Mono</wb-button>
                </div>
                
                <div style="max-width: 500px;">
                    <wb-color-bars id="preset-picker"></wb-color-bars>
                </div>
            </wb-demo-section>

            <!-- Live Preview -->
            <wb-demo-section>
                <h2>üëÅÔ∏è Live Preview</h2>
                <p>See your colors in action with this live preview panel.</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div style="max-width: 400px;">
                        <wb-color-bars id="preview-picker"></wb-color-bars>
                    </div>
                    <div id="live-preview" style="padding: 1.5rem; border-radius: 8px; background: #1a1a2e; color: #eaf6ff;">
                        <h3 style="margin-top: 0;">Preview Panel</h3>
                        <p>This text updates in real-time as you adjust the colors. Try changing the text color and background to see the effect.</p>
                        <p><strong>Features:</strong></p>
                        <ul>
                            <li>Real-time color updates</li>
                            <li>Copy colors to clipboard</li>
                            <li>Swap text and background</li>
                        </ul>
                    </div>
                </div>
            </wb-demo-section>

            <!-- JavaScript API -->
            <wb-demo-section>
                <h2>‚ö° JavaScript API</h2>
                <p>Control the color picker programmatically.</p>
                
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem;">
                    <wb-button variant="primary" onclick="getColors()">Get Colors</wb-button>
                    <wb-button variant="secondary" onclick="setRandomColors()">Random Colors</wb-button>
                    <wb-button variant="success" onclick="setTextColor()">Set Text Blue</wb-button>
                    <wb-button variant="warning" onclick="setBgColor()">Set BG Orange</wb-button>
                </div>
                
                <div style="max-width: 500px;">
                    <wb-color-bars id="api-picker"></wb-color-bars>
                </div>
                <wb-demo-output id="api-output">Use buttons above to test the API</wb-demo-output>
            </wb-demo-section>

            <!-- Event Log -->
            <wb-demo-section>
                <h2>üìã Event Log</h2>
                <p>Color change events are logged here.</p>
                <wb-event-log 
                    id="demo-event-log"
                    max-events="20"
                    auto-scroll="true"
                    show-timestamps="true"
                    style="max-height: 250px;">
                </wb-event-log>
            </wb-demo-section>

        </div>
    </wb-demo>

    <script type="module">
        let eventLog;
        
        // Color presets
        const presets = {
            ocean: { text: [200, 90, 85], bg: [210, 60, 12] },
            forest: { text: [90, 70, 85], bg: [140, 40, 15] },
            sunset: { text: [40, 100, 90], bg: [20, 80, 20] },
            berry: { text: [320, 80, 85], bg: [280, 50, 15] },
            mono: { text: [0, 0, 90], bg: [0, 0, 10] }
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            eventLog = document.getElementById('demo-event-log');
            logEvent('info', 'üé® WB Color Bars Demo initialized');

            // Setup main picker events
            const mainPicker = document.getElementById('main-picker');
            mainPicker?.addEventListener('colorchange', (e) => {
                const data = e.detail;
                document.getElementById('picker-output').textContent = 
                    `Text: ${data.text.hex} | Background: ${data.background.hex}`;
                logEvent('success', `Colors: ${data.text.hex} / ${data.background.hex}`);

                // Update semantic elements colors
                const semanticDemo = document.getElementById('semantic-demo');
                if (semanticDemo && semanticDemo.shadowRoot) {
                    semanticDemo.shadowRoot.querySelectorAll('.wb-semantic-container, [data-wb-semantic]').forEach(el => {
                        el.style.color = data.text.hex;
                        el.style.background = data.background.hex;
                    });
                }
            });

            // Setup preview picker
            const previewPicker = document.getElementById('preview-picker');
            previewPicker?.addEventListener('colorchange', (e) => {
                const data = e.detail;
                const preview = document.getElementById('live-preview');
                preview.style.color = data.text.hex;
                preview.style.background = data.background.hex;
            });
        });
        
        function logEvent(type, message) {
            if (eventLog && eventLog.addEvent) {
                eventLog.addEvent({ type, message, source: 'wb-color-bars-demo' });
            }
        }
        
        // Preset functions
        window.applyPreset = function(name) {
            const preset = presets[name];
            if (!preset) return;
            
            const picker = document.getElementById('preset-picker');
            if (picker) {
                picker.setTextColor(...preset.text);
                picker.setBackgroundColor(...preset.bg);
                logEvent('info', `Applied preset: ${name}`);
            }
        };
        
        // API functions
        window.getColors = function() {
            const picker = document.getElementById('api-picker');
            if (picker) {
                const data = picker.getColorData ? picker.getColorData() : { text: picker.textColor, background: picker.backgroundColor };
                document.getElementById('api-output').textContent = 
                    `Text: ${data.text.hex} | BG: ${data.background.hex}`;
                logEvent('info', `Got colors: ${data.text.hex} / ${data.background.hex}`);
            }
        };
        
        window.setRandomColors = function() {
            const picker = document.getElementById('api-picker');
            if (picker) {
                const randomHue = () => Math.random() * 360;
                const randomSat = () => 40 + Math.random() * 60;
                
                picker.setTextColor(randomHue(), randomSat(), 80);
                picker.setBackgroundColor(randomHue(), randomSat(), 20);
                
                document.getElementById('api-output').textContent = 'Random colors applied!';
                logEvent('success', 'Random colors applied');
            }
        };
        
        window.setTextColor = function() {
            const picker = document.getElementById('api-picker');
            if (picker) {
                picker.setTextColor(220, 80, 70);
                document.getElementById('api-output').textContent = 'Text color set to blue';
                logEvent('info', 'Text set to blue');
            }
        };
        
        window.setBgColor = function() {
            const picker = document.getElementById('api-picker');
            if (picker) {
                picker.setBackgroundColor(30, 80, 25);
                document.getElementById('api-output').textContent = 'Background set to orange';
                logEvent('info', 'Background set to orange');
            }
        };
    </script>
</body>
</html>
