<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WBBaseComponent - Automatic Event Log Injection Demo</title>
    <link rel="stylesheet" href="../../src/styles/main.css">
    <!-- ONE import for ALL WB components -->
    <script type="module" src="../../src/js/main.js"></script>    
</head>

<body>
    <wb-demo title="WBBaseComponent - Automatic Event Log Injection Demo" 
    markdown="./wb-base-demo.md">
        <div slot="examples" class="container">
            <!-- Right Panel: Demo Controls -->
            <div class="panel">
                <h2>ğŸ® Demo Controls <span class="status-badge">READY</span></h2>
                <p>Click buttons below to trigger different logging events. Watch the event log update in real-time!</p>

                <div class="button-group">
                    <h3 style="margin-bottom: 12px;">Component Logging</h3>
                    <div class="button-row">
                        <button onclick="logDemoInfo()">â„¹ï¸ Log Info</button>
                        <button onclick="logDemoWarning()">âš ï¸ Log Warning</button>
                    </div>
                    <div class="button-row">
                        <button onclick="logDemoError()">âŒ Log Error</button>
                        <button onclick="logDemoSuccess()">âœ… Log Success</button>
                    </div>
                </div>

                <div class="button-group">
                    <h3 style="margin-bottom: 12px;">Advanced Actions</h3>
                    <button onclick="logMultipleEvents()" class="secondary">ğŸ“Š Log Multiple Events</button>
                    <button onclick="simulateUserFlow()" class="secondary">ğŸ‘¤ Simulate User Flow</button>
                </div>

                <div class="button-group">
                    <h3 style="margin-bottom: 12px;">Event Log Control</h3>
                    <button onclick="clearEventLog()" style="background: #dc3545;">ğŸ—‘ï¸ Clear All Events</button>
                </div>

                <div class="info-box" style="margin-top: 20px;">
                    <strong>ğŸ’¡ Tip:</strong> Events automatically logged in real-time!
                </div>
            </div>

            <div class="event-log-panel" style="margin:2rem 0;">
                <h3>Event Log</h3>
                <pre id="eventLog" style="min-height:200px;max-height:400px;overflow:auto;background:#222;color:#eee;padding:1rem;border-radius:8px;"></pre>
            </div>
        </div>
    </wb-demo>
    <!-- Demo Script -->
    <script>
        // Simple in-memory event storage
        const events = [];

        // Demo logging class (no dependencies!)
        class DemoComponent {
            constructor() {
                this.componentName = 'DemoComponent';
            }

            logInfo(message, details = {}) {
                this.addEvent('info', message, details);
            }

            logWarning(message, details = {}) {
                this.addEvent('warning', message, details);
            }

            logError(message, details = {}) {
                this.addEvent('error', message, details);
            }

            logSuccess(message, details = {}) {
                this.addEvent('success', message, details);
            }

            logDebug(message, details = {}) {
                this.addEvent('debug', message, details);
            }

            logUser(message, details = {}) {
                this.addEvent('user', message, details);
            }

            addEvent(type, message, details) {
                const event = {
                    type: type,
                    message: message,
                    source: this.componentName,
                    timestamp: new Date().toLocaleTimeString(),
                    details: details
                };
                events.unshift(event);
                updateEventLog();
            }
        }

        // Create demo component
        const demoComponent = new DemoComponent();

        // Update event log display
        function updateEventLog() {
            const logElement = document.getElementById('eventLog');
            const lines = events.map(e => {
                const icon = getIcon(e.type);
                const detailStr = Object.keys(e.details).length > 0
                    ? ` | ${JSON.stringify(e.details)}`
                    : '';
                return `${e.timestamp} ${icon} [${e.source}] ${e.message}${detailStr}`;
            });
            logElement.textContent = lines.join('\n') || 'Waiting for events...';
            logElement.scrollTop = 0;
        }

        function getIcon(type) {
            const icons = {
                'info': 'â„¹ï¸',
                'warning': 'âš ï¸',
                'error': 'âŒ',
                'success': 'âœ…',
                'debug': 'ğŸ› ï¸',
                'user': 'ğŸ‘¤'
            };
            return icons[type] || 'ğŸ“';
        }

        // Demo functions
        window.logDemoInfo = function () {
            demoComponent.logInfo('Info message - This is general information', {
                timestamp: new Date().toLocaleTimeString(),
                action: 'demo'
            });
        };

        window.logDemoWarning = function () {
            demoComponent.logWarning('Warning message - Non-critical issue detected', {
                severity: 'low',
                code: 'WARN_001'
            });
        };

        window.logDemoError = function () {
            demoComponent.logError('Error message - Something went wrong', {
                code: 'ERR_001',
                details: 'This is a demo error for testing'
            });
        };

        window.logDemoSuccess = function () {
            demoComponent.logSuccess('Success message - Operation completed successfully', {
                duration: '125ms',
                result: 'OK'
            });
        };

        window.logMultipleEvents = function () {
            setTimeout(() => demoComponent.logInfo('Event 1: Starting process'), 0);
            setTimeout(() => demoComponent.logInfo('Event 2: Processing data'), 100);
            setTimeout(() => demoComponent.logSuccess('Event 3: Process completed'), 200);
        };

        window.simulateUserFlow = function () {
            demoComponent.logUser('User clicked button', { buttonId: 'demo-btn' });
            setTimeout(() => demoComponent.logInfo('Processing user action'), 100);
            setTimeout(() => demoComponent.logSuccess('User action completed'), 200);
        };

        window.clearEventLog = function () {
            events.length = 0;
            updateEventLog();
            demoComponent.logInfo('All events cleared', { action: 'clear-all' });
        };

        // Initialize
        demoComponent.logSuccess('ğŸ‰ Demo initialized - Event logging active!', {
            components: 'DemoComponent',
            status: 'ready'
        });

        demoComponent.logInfo('ğŸ‘‰ Click buttons above to see logging in action', {
            note: 'All events appear here in real-time'
        });
    </script>
</body>

</html>