<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WB Select Web Component Demo</title>
    
    <!-- Website Builder Main Styles (Variables, Base, Utilities) -->
    <link rel="stylesheet" href="../../styles/main.css">
    
    <!-- Event Log Component -->
    <script type="module" src="../wb-event-log/wb-event-log.js"></script>
    
    <!-- Component-specific CSS -->
    <link rel="stylesheet" href="wb-select.css">
</head>
<body data-theme="dark">
    <h1>üìã WB Select Web Component Demo</h1>
    <p>Testing the new Web Components API version of wb-select</p>
    
    <!-- Event Log -->
    <div class="demo-section">
        <h2>üìã Event Log</h2>

    </div>
    
    <!-- Basic Select -->
    <div class="demo-section">
        <h2>üéØ Basic Select</h2>
        <div class="demo-grid">
            <div class="demo-item">
                <label>Theme Selection:</label>
                <wb-select placeholder="Choose a theme..." id="basicSelect">
                    <option value="light">Light Theme</option>
                    <option value="dark" selected>Dark Theme</option>
                    <option value="auto">Auto Theme</option>
                    <option value="cyberpunk">Cyberpunk Theme</option>
                </wb-select>
                <code>&lt;wb-select placeholder="Choose a theme..."&gt;
  &lt;option value="light"&gt;Light Theme&lt;/option&gt;
  &lt;option value="dark" selected&gt;Dark Theme&lt;/option&gt;
  &lt;option value="auto"&gt;Auto Theme&lt;/option&gt;
&lt;/wb-select&gt;</code>
            </div>
            
            <div class="demo-item">
                <label>Framework Selection:</label>
                <wb-select placeholder="Select framework...">
                    <option value="react">React</option>
                    <option value="vue">Vue.js</option>
                    <option value="angular">Angular</option>
                    <option value="svelte">Svelte</option>
                    <option value="vanilla">Vanilla JS</option>
                </wb-select>
            </div>
        </div>
    </div>
    
    <!-- Sizes -->
    <div class="demo-section">
        <h2>üìè Sizes</h2>
        <div class="demo-grid">
            <div class="demo-item">
                <label>Small Size:</label>
                <wb-select size="small" placeholder="Small select...">
                    <option value="1">Option 1</option>
                    <option value="2">Option 2</option>
                    <option value="3">Option 3</option>
                </wb-select>
            </div>
            
            <div class="demo-item">
                <label>Standard Size:</label>
                <wb-select size="standard" placeholder="Standard select...">
                    <option value="1">Option 1</option>
                    <option value="2">Option 2</option>
                    <option value="3">Option 3</option>
                </wb-select>
            </div>
            
            <div class="demo-item">
                <label>Large Size:</label>
                <wb-select size="large" placeholder="Large select...">
                    <option value="1">Option 1</option>
                    <option value="2">Option 2</option>
                    <option value="3">Option 3</option>
                </wb-select>
            </div>
        </div>
        <code>&lt;wb-select size="small"&gt;...&lt;/wb-select&gt;
&lt;wb-select size="standard"&gt;...&lt;/wb-select&gt;
&lt;wb-select size="large"&gt;...&lt;/wb-select&gt;</code>
    </div>
    
    <!-- States -->
    <div class="demo-section">
        <h2>üîò States</h2>
        <div class="demo-grid">
            <div class="demo-item">
                <label>Normal:</label>
                <wb-select placeholder="Normal select...">
                    <option value="normal">Normal Option</option>
                </wb-select>
            </div>
            
            <div class="demo-item">
                <label>Disabled:</label>
                <wb-select disabled placeholder="Disabled select...">
                    <option value="disabled">Cannot select</option>
                </wb-select>
            </div>
        </div>
        <code>&lt;wb-select placeholder="Normal"&gt;...&lt;/wb-select&gt;
&lt;wb-select disabled&gt;...&lt;/wb-select&gt;</code>
    </div>
    
    <!-- Searchable Select -->
    <div class="demo-section">
        <h2>üîç Searchable Select</h2>
        <div class="demo-grid">
            <div class="demo-item">
                <label>Search Countries:</label>
                <wb-select searchable placeholder="Search countries...">
                    <option value="us">United States</option>
                    <option value="ca">Canada</option>
                    <option value="uk">United Kingdom</option>
                    <option value="fr">France</option>
                    <option value="de">Germany</option>
                    <option value="it">Italy</option>
                    <option value="es">Spain</option>
                    <option value="au">Australia</option>
                    <option value="jp">Japan</option>
                    <option value="kr">South Korea</option>
                    <option value="cn">China</option>
                    <option value="in">India</option>
                    <option value="br">Brazil</option>
                    <option value="mx">Mexico</option>
                </wb-select>
                <code>&lt;wb-select searchable placeholder="Search countries..."&gt;
  &lt;option value="us"&gt;United States&lt;/option&gt;
  &lt;option value="ca"&gt;Canada&lt;/option&gt;
  ...
&lt;/wb-select&gt;</code>
            </div>
        </div>
    </div>
    
    <!-- Multiple Select -->
    <div class="demo-section">
        <h2>üìã Multiple Select</h2>
        <div class="demo-grid">
            <div class="demo-item">
                <label>Select Multiple Skills:</label>
                <wb-select multiple placeholder="Choose your skills...">
                    <option value="js">JavaScript</option>
                    <option value="ts">TypeScript</option>
                    <option value="react">React</option>
                    <option value="vue">Vue.js</option>
                    <option value="node">Node.js</option>
                    <option value="python">Python</option>
                    <option value="css">CSS</option>
                    <option value="html">HTML</option>
                </wb-select>
                <code>&lt;wb-select multiple placeholder="Choose skills..."&gt;
  &lt;option value="js"&gt;JavaScript&lt;/option&gt;
  &lt;option value="ts"&gt;TypeScript&lt;/option&gt;
  ...
&lt;/wb-select&gt;</code>
            </div>
            
            <div class="demo-item">
                <label>Searchable Multiple:</label>
                <wb-select multiple searchable placeholder="Search and select...">
                    <option value="frontend">Frontend Development</option>
                    <option value="backend">Backend Development</option>
                    <option value="fullstack">Full Stack Development</option>
                    <option value="mobile">Mobile Development</option>
                    <option value="desktop">Desktop Development</option>
                    <option value="devops">DevOps</option>
                    <option value="testing">Testing & QA</option>
                    <option value="design">UI/UX Design</option>
                </wb-select>
            </div>
        </div>
    </div>
    
    <!-- Grouped Options -->
    <div class="demo-section">
        <h2>üìÅ Grouped Options</h2>
        <div class="demo-grid">
            <div class="demo-item">
                <label>Technology Stack:</label>
                <wb-select placeholder="Select technology...">
                    <optgroup label="Frontend">
                        <option value="react">React</option>
                        <option value="vue">Vue.js</option>
                        <option value="angular">Angular</option>
                        <option value="svelte">Svelte</option>
                    </optgroup>
                    <optgroup label="Backend">
                        <option value="node">Node.js</option>
                        <option value="python">Python</option>
                        <option value="php">PHP</option>
                        <option value="java">Java</option>
                    </optgroup>
                    <optgroup label="Database">
                        <option value="mysql">MySQL</option>
                        <option value="postgres">PostgreSQL</option>
                        <option value="mongodb">MongoDB</option>
                        <option value="redis">Redis</option>
                    </optgroup>
                </wb-select>
                <code>&lt;wb-select placeholder="Select technology..."&gt;
  &lt;optgroup label="Frontend"&gt;
    &lt;option value="react"&gt;React&lt;/option&gt;
    &lt;option value="vue"&gt;Vue.js&lt;/option&gt;
  &lt;/optgroup&gt;
  &lt;optgroup label="Backend"&gt;
    &lt;option value="node"&gt;Node.js&lt;/option&gt;
    &lt;option value="python"&gt;Python&lt;/option&gt;
  &lt;/optgroup&gt;
&lt;/wb-select&gt;</code>
            </div>
        </div>
    </div>
    
    <!-- Dynamic Testing -->
    <div class="demo-section">
        <h2>üîß Dynamic Testing</h2>
        <div class="demo-item">
            <label>Test Select:</label>
            <wb-select id="testSelect" placeholder="Test select...">
                <option value="option1">Option 1</option>
                <option value="option2">Option 2</option>
                <option value="option3">Option 3</option>
            </wb-select>
            
            <div class="control-buttons">
                <button onclick="toggleMultiple()">Toggle Multiple</button>
                <button onclick="toggleSearchable()">Toggle Searchable</button>
                <button onclick="toggleDisabled()">Toggle Disabled</button>
                <button onclick="setValue()">Set Value</button>
                <button onclick="addOption()">Add Option</button>
                <button onclick="removeOption()">Remove Option</button>
                <button onclick="clearValue()">Clear</button>
                <button onclick="getValue()">Get Value</button>
            </div>
            
            <div class="output-display" id="outputDisplay">
                Current value: null
            </div>
        </div>
    </div>
    
    <!-- API Testing -->
    <div class="demo-section">
        <h2>‚öôÔ∏è API Methods</h2>
        <div class="demo-item">
            <label>API Test Select:</label>
            <wb-select id="apiSelect" multiple searchable placeholder="API testing...">
                <option value="test1">Test Option 1</option>
                <option value="test2">Test Option 2</option>
            </wb-select>
            
            <div class="control-buttons">
                <button onclick="apiOpen()">Open</button>
                <button onclick="apiClose()">Close</button>
                <button onclick="apiSetValue()">Set ["test1", "test2"]</button>
                <button onclick="apiGetValue()">Get Value</button>
                <button onclick="apiAddOption()">Add Option</button>
                <button onclick="apiRemoveOption()">Remove Option</button>
                <button onclick="apiClear()">Clear All</button>
            </div>
            
            <div class="output-display" id="apiOutput">
                API results will appear here...
            </div>
        </div>
    </div>
    
    <!-- Scripts: Load utilities first -->
    <script src="../wb-component-utils.js"></script>
        <!-- Load WB Select Component -->
    <script type="module" src="wb-select.js"></script>
    
    <script>
        let optionCounter = 4;
        
        // Test wb-event-log immediately
        setTimeout(() => {
            console.log('Testing wb-event-log...');
            document.dispatchEvent(new CustomEvent('wb:info', {
                detail: { 
                    message: 'Test event from wb-select demo',
                    source: 'test'
                },
                bubbles: true
            }));
        }, 1000);
        
        // Event logging using wb-event-log system  
        // The wb-event-log component listens for wb: prefixed events automatically
        function logEvent(type, detail) {
            // Format message based on detail content
            let message = '';
            if (detail.event) {
                message = detail.event;
                if (detail.value !== undefined) {
                    message += `: ${JSON.stringify(detail.value)}`;
                }
                if (detail.searchTerm) {
                    message += `: "${detail.searchTerm}"`;
                }
                if (detail.selectId) {
                    message += ` (${detail.selectId})`;
                }
            } else if (detail.action) {
                message = detail.action;
            } else {
                message = JSON.stringify(detail);
            }
            
            // Dispatch wb: namespaced event
            const eventName = `wb:${type}`;
            document.dispatchEvent(new CustomEvent(eventName, {
                detail: { 
                    message: message,
                    source: 'wb-select',
                    ...detail
                },
                bubbles: true
            }));
        }
        
        // Listen for Web Component events and log them using wb-event-log
        document.addEventListener('wb-select:change', (e) => {
            logEvent('info', {
                event: 'selection changed',
                value: e.detail.value,
                option: e.detail.option?.text || 'N/A'
            });
        });
        
        document.addEventListener('wb-select:open', (e) => {
            logEvent('info', { 
                event: 'dropdown opened',
                selectId: e.target.id || 'unnamed' 
            });
        });
        
        document.addEventListener('wb-select:close', (e) => {
            logEvent('info', { 
                event: 'dropdown closed',
                selectId: e.target.id || 'unnamed' 
            });
        });
        
        document.addEventListener('wb-select:search', (e) => {
            logEvent('debug', { 
                event: 'search performed',
                searchTerm: e.detail.searchTerm 
            });
        });
        
        document.addEventListener('wb-select:ready', (e) => {
            logEvent('success', { 
                event: 'component ready',
                component: e.detail.component 
            });
        });
        
        // Dynamic testing functions
        function toggleMultiple() {
            const select = document.getElementById('testSelect');
            const hasMultiple = select.hasAttribute('multiple');
            
            if (hasMultiple) {
                select.removeAttribute('multiple');
            } else {
                select.setAttribute('multiple', '');
            }
            
            updateOutput();
        }
        
        function toggleSearchable() {
            const select = document.getElementById('testSelect');
            const hasSearchable = select.hasAttribute('searchable');
            
            if (hasSearchable) {
                select.removeAttribute('searchable');
            } else {
                select.setAttribute('searchable', '');
            }
        }
        
        function toggleDisabled() {
            const select = document.getElementById('testSelect');
            const isDisabled = select.hasAttribute('disabled');
            select.setDisabled(!isDisabled);
        }
        
        function setValue() {
            const select = document.getElementById('testSelect');
            select.setValue('option2');
            updateOutput();
        }
        
        function addOption() {
            const select = document.getElementById('testSelect');
            select.addOption({
                value: `option${optionCounter}`,
                text: `Dynamic Option ${optionCounter}`,
                disabled: false
            });
            optionCounter++;
        }
        
        function removeOption() {
            const select = document.getElementById('testSelect');
            select.removeOption('option1');
            updateOutput();
        }
        
        function clearValue() {
            const select = document.getElementById('testSelect');
            select.clear();
            updateOutput();
        }
        
        function getValue() {
            const select = document.getElementById('testSelect');
            const value = select.getValue();
            alert(`Current value: ${JSON.stringify(value)}`);
            updateOutput();
        }
        
        function updateOutput() {
            const select = document.getElementById('testSelect');
            const value = select.getValue();
            const output = document.getElementById('outputDisplay');
            output.textContent = `Current value: ${JSON.stringify(value)}`;
        }
        
        // API testing functions
        function apiOpen() {
            const select = document.getElementById('apiSelect');
            select.open();
            updateApiOutput('Opened dropdown');
        }
        
        function apiClose() {
            const select = document.getElementById('apiSelect');
            select.close();
            updateApiOutput('Closed dropdown');
        }
        
        function apiSetValue() {
            const select = document.getElementById('apiSelect');
            select.setValue(['test1', 'test2']);
            updateApiOutput(`Set value to: ${JSON.stringify(['test1', 'test2'])}`);
        }
        
        function apiGetValue() {
            const select = document.getElementById('apiSelect');
            const value = select.getValue();
            updateApiOutput(`Current value: ${JSON.stringify(value)}`);
        }
        
        function apiAddOption() {
            const select = document.getElementById('apiSelect');
            select.addOption({
                value: `api-option-${Date.now()}`,
                text: `API Option ${Date.now()}`,
                disabled: false
            });
            updateApiOutput('Added new option');
        }
        
        function apiRemoveOption() {
            const select = document.getElementById('apiSelect');
            select.removeOption('test1');
            updateApiOutput('Removed test1 option');
        }
        
        function apiClear() {
            const select = document.getElementById('apiSelect');
            select.clear();
            updateApiOutput('Cleared all selections');
        }
        
        function updateApiOutput(message) {
            const output = document.getElementById('apiOutput');
            const timestamp = new Date().toLocaleTimeString();
            output.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            
            // Also log to wb-event-log
            logEvent('user', {
                event: 'API method called',
                action: message
            });
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                updateOutput();
                updateApiOutput('API ready for testing');
                
                // Log demo initialization
                logEvent('success', {
                    event: 'demo initialized',
                    message: 'wb-select demo page loaded successfully'
                });
            }, 500);
        });
    </script>
</body>
</html>


