{
  "component": {
    "name": "wb-toggle",
    "version": "2.0.0",
    "description": "Data-driven toggle switch component with accessibility and theming support",
    "type": "form-component",
    "author": "Website Builder System",
    "dependencies": [],
    "assets": []
  },
  "template": {
    "structure": [
      {
        "tag": "div",
        "attributes": {
          "class": "wb-toggle-wrapper wb-toggle--{{size}} wb-toggle--{{variant}} wb-toggle--label-{{labelPosition}}",
          "data-disabled": { "bind": { "data": "disabled" } }
        },
        "children": [
          {
            "tag": "label",
            "attributes": {
              "class": "wb-toggle-label",
              "for": "{{id}}"
            },
            "content": "{{label}}",
            "condition": {
              "field": "label",
              "operator": "exists"
            }
          },
          {
            "tag": "div",
            "attributes": {
              "class": "wb-toggle"
            },
            "children": [
              {
                "tag": "input",
                "attributes": {
                  "type": "checkbox",
                  "id": "{{id}}",
                  "class": "wb-toggle-input",
                  "checked": { "bind": { "data": "checked" } },
                  "disabled": { "bind": { "data": "disabled" } },
                  "aria-labelledby": "{{id}}-label",
                  "role": "switch"
                }
              },
              {
                "tag": "div",
                "attributes": {
                  "class": "wb-toggle-slider",
                  "aria-hidden": "true"
                },
                "children": [
                  {
                    "tag": "div",
                    "attributes": {
                      "class": "wb-toggle-thumb"
                    }
                  }
                ]
              }
            ]
          },
          {
            "tag": "span",
            "attributes": {
              "class": "wb-toggle-help-text",
              "id": "{{id}}-help"
            },
            "content": "{{helpText}}",
            "condition": {
              "field": "helpText",
              "operator": "exists"
            }
          }
        ]
      }
    ]
  },
  "styles": {
    "base": {
      "display": "inline-flex",
      "alignItems": "center",
      "gap": "var(--space-sm, 0.5rem)",
      "fontFamily": "inherit",
      "fontSize": "var(--wb-toggle-font-size, 0.875rem)"
    },
    "elements": {
      ".wb-toggle": {
        "position": "relative",
        "display": "inline-block",
        "width": "var(--wb-toggle-width, 3rem)",
        "height": "var(--wb-toggle-height, 1.5rem)",
        "flexShrink": "0"
      },
      ".wb-toggle-input": {
        "position": "absolute",
        "width": "1px",
        "height": "1px",
        "padding": "0",
        "margin": "-1px",
        "overflow": "hidden",
        "clip": "rect(0, 0, 0, 0)",
        "whiteSpace": "nowrap",
        "border": "0"
      },
      ".wb-toggle-slider": {
        "position": "absolute",
        "top": "0",
        "left": "0",
        "right": "0",
        "bottom": "0",
        "backgroundColor": "var(--neutral-300)",
        "borderRadius": "var(--wb-toggle-border-radius, 1rem)",
        "transition": "var(--wb-toggle-transition, all 0.2s ease)",
        "cursor": "pointer"
      },
      ".wb-toggle-thumb": {
        "position": "absolute",
        "top": "50%",
        "left": "2px",
        "width": "var(--wb-toggle-thumb-size, 1.25rem)",
        "height": "var(--wb-toggle-thumb-size, 1.25rem)",
        "backgroundColor": "white",
        "borderRadius": "50%",
        "transform": "translateY(-50%)",
        "transition": "var(--wb-toggle-transition, all 0.2s ease)",
        "boxShadow": "0 2px 4px rgba(0, 0, 0, 0.1)"
      },
      ".wb-toggle-label": {
        "color": "var(--text-primary)",
        "fontWeight": "500",
        "cursor": "pointer",
        "userSelect": "none"
      },
      ".wb-toggle-help-text": {
        "fontSize": "0.75rem",
        "color": "var(--text-secondary)",
        "marginTop": "0.25rem"
      }
    },
    "variants": {
      "primary": {
        ".wb-toggle-input:checked + .wb-toggle-slider": {
          "backgroundColor": "var(--primary)"
        }
      },
      "success": {
        ".wb-toggle-input:checked + .wb-toggle-slider": {
          "backgroundColor": "var(--accent)"
        }
      },
      "warning": {
        ".wb-toggle-input:checked + .wb-toggle-slider": {
          "backgroundColor": "var(--warning-color)"
        }
      },
      "error": {
        ".wb-toggle-input:checked + .wb-toggle-slider": {
          "backgroundColor": "var(--error-color)"
        }
      }
    },
    "sizes": {
      "small": {
        "--wb-toggle-width": "2.5rem",
        "--wb-toggle-height": "1.25rem",
        "--wb-toggle-thumb-size": "1rem",
        "--wb-toggle-font-size": "0.75rem"
      },
      "large": {
        "--wb-toggle-width": "3.5rem",
        "--wb-toggle-height": "1.75rem",
        "--wb-toggle-thumb-size": "1.5rem",
        "--wb-toggle-font-size": "1rem"
      }
    },
    "states": {
      "checked": {
        ".wb-toggle-input:checked + .wb-toggle-slider .wb-toggle-thumb": {
          "transform": "translateY(-50%) translateX(calc(var(--wb-toggle-width) - var(--wb-toggle-thumb-size) - 4px))"
        }
      },
      "disabled": {
        "opacity": "0.6",
        "pointerEvents": "none",
        ".wb-toggle-slider": {
          "cursor": "not-allowed"
        },
        ".wb-toggle-label": {
          "cursor": "not-allowed"
        }
      },
      "focus": {
        ".wb-toggle-input:focus + .wb-toggle-slider": {
          "outline": "2px solid var(--primary)",
          "outlineOffset": "2px"
        }
      }
    },
    "labelPositions": {
      "left": {
        "flexDirection": "row-reverse"
      },
      "top": {
        "flexDirection": "column",
        "alignItems": "flex-start"
      },
      "bottom": {
        "flexDirection": "column-reverse",
        "alignItems": "flex-start"
      }
    },
    "responsive": {
      "(max-width: 640px)": {
        "--wb-toggle-width": "2.75rem",
        "--wb-toggle-height": "1.5rem",
        "--wb-toggle-thumb-size": "1.25rem"
      }
    }
  },
  "handlers": {
    "change": {
      "selector": ".wb-toggle-input",
      "action": {
        "type": "updateData",
        "payload": {
          "checked": "event.target.checked"
        }
      }
    },
    "focus": {
      "selector": ".wb-toggle-input",
      "action": {
        "type": "setState",
        "payload": {
          "state": "focus"
        }
      }
    },
    "blur": {
      "selector": ".wb-toggle-input",
      "action": {
        "type": "setState",
        "payload": {
          "state": "default"
        }
      }
    },
    "keydown": {
      "selector": ".wb-toggle-input",
      "action": {
        "type": "custom",
        "payload": {
          "handler": "handleToggleKeydown"
        }
      }
    }
  },
  "defaults": {
    "data": {
      "label": "Toggle",
      "checked": false,
      "disabled": false,
      "size": "standard",
      "variant": "primary",
      "labelPosition": "right",
      "id": "toggle-{{timestamp}}"
    },
    "state": "default"
  },
  "events": {
    "ready": "wbToggleReady",
    "change": "wbToggleChange",
    "focus": "wbToggleFocus",
    "blur": "wbToggleBlur",
    "stateChanged": "wbToggleStateChanged"
  },
  "validation": {
    "required": ["id"],
    "schema": {
      "label": { "type": "string", "maxLength": 100 },
      "checked": { "type": "boolean" },
      "disabled": { "type": "boolean" },
      "size": { "type": "string", "enum": ["small", "standard", "large"] },
      "variant": { "type": "string", "enum": ["primary", "success", "warning", "error"] },
      "labelPosition": { "type": "string", "enum": ["left", "right", "top", "bottom"] },
      "helpText": { "type": "string", "maxLength": 200 },
      "id": { "type": "string", "pattern": "^[a-zA-Z][a-zA-Z0-9-_]*$" }
    }
  },
  "accessibility": {
    "features": [
      "keyboard navigation",
      "screen reader support", 
      "focus management",
      "ARIA attributes",
      "label association"
    ],
    "attributes": {
      "role": "switch",
      "aria-checked": "dynamic",
      "aria-labelledby": "label association",
      "aria-describedby": "help text"
    },
    "keyboardShortcuts": {
      "Space": "Toggle state",
      "Enter": "Toggle state"
    }
  },
  "examples": {
    "basic": {
      "label": "Dark Mode",
      "id": "dark-mode"
    },
    "checked": {
      "label": "Notifications",
      "checked": true,
      "id": "notifications"
    },
    "withHelp": {
      "label": "Auto Save",
      "helpText": "Automatically save changes as you work",
      "checked": true,
      "id": "auto-save"
    },
    "disabled": {
      "label": "Beta Features",
      "disabled": true,
      "helpText": "Contact admin to enable beta features",
      "id": "beta-features"
    },
    "variants": {
      "success": {
        "label": "Enable Feature",
        "variant": "success",
        "id": "enable-feature"
      },
      "warning": {
        "label": "Experimental Mode",
        "variant": "warning",
        "helpText": "May cause instability",
        "id": "experimental"
      },
      "error": {
        "label": "Delete on Exit",
        "variant": "error",
        "helpText": "Permanently delete temporary files",
        "id": "delete-exit"
      }
    },
    "sizes": {
      "small": {
        "label": "Compact",
        "size": "small",
        "id": "compact-toggle"
      },
      "large": {
        "label": "Prominent",
        "size": "large",
        "id": "prominent-toggle"
      }
    },
    "labelPositions": {
      "left": {
        "label": "Label Left",
        "labelPosition": "left",
        "id": "label-left"
      },
      "top": {
        "label": "Label Top",
        "labelPosition": "top",
        "id": "label-top"
      }
    }
  }
}