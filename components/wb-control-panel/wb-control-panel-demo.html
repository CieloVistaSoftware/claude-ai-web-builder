<!DOCTYPE html>
<html lang="en" data-theme="dark" data-mode="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WB Control Panel Demo</title>
    
    <!-- Load styles -->
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="./wb-control-panel.css">
    <link rel="stylesheet" href="./wb-control-panel-demo.css">
    
    <!-- Load components as modules -->
    <script type="module" src="../wb-demo/wb-demo.js"></script>
    <script type="module" src="./wb-control-panel.js"></script>
</head>
<body>
    
    <wb-demo title="üé® WB Control Panel" markdown="./wb-control-panel.md">
        <div slot="examples">
            
            <!-- OVERVIEW -->
            <section class="demo-section">
                <h2>üìã Overview</h2>
                <p>The control panel is a <strong>floating element</strong> (position: fixed) that appears on the right side of the viewport. 
                   It applies color changes to ALL elements in the document body via CSS custom properties.</p>
                
                <div class="demo-render">
                    <div class="demo-info-box">
                        <p>
                            üëâ The control panel is visible on the <strong class="text-primary">right side of this page</strong>. 
                            Try adjusting the sliders and watch all elements change!
                        </p>
                    </div>
                </div>
                <div class="demo-code">
                    <div class="demo-code-label">HTML</div>
                    <pre>&lt;!-- Control panel floats automatically - just add to page --&gt;
&lt;wb-control-panel&gt;&lt;/wb-control-panel&gt;</pre>
                </div>
            </section>

            <!-- CSS VARIABLE INHERITANCE -->
            <section class="demo-section">
                <h2>üîÑ CSS Variable Inheritance Demo</h2>
                <p>These elements use CSS variables that automatically update when you change control panel settings.</p>
                
                <div class="demo-render demo-render--column">
                    <div class="demo-card">
                        <h4>Sample Card Component</h4>
                        <p>This card uses --bg-secondary, --border-color, --primary, and --text-secondary variables.</p>
                    </div>
                    <input type="text" class="demo-input" placeholder="Type here... (uses CSS variables)">
                </div>
                <div class="demo-code">
                    <div class="demo-code-label">CSS Variables Used</div>
                    <pre>background: var(--bg-secondary);
border: 1px solid var(--border-color);
color: var(--text-secondary);
/* Focus state */
border-color: var(--primary);
box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.2);</pre>
                </div>
            </section>

            <!-- CORE COLORS -->
            <section class="demo-section">
                <h2>üåà Core Colors</h2>
                <p>Primary, secondary, and accent colors automatically calculated from the base hue.</p>
                
                <div class="demo-render">
                    <div class="color-grid">
                        <div class="color-swatch color-primary">
                            <strong>Primary</strong>
                            <small>Main brand color</small>
                        </div>
                        <div class="color-swatch color-secondary">
                            <strong>Secondary</strong>
                            <small>Complementary (180¬∞)</small>
                        </div>
                        <div class="color-swatch color-accent">
                            <strong>Accent</strong>
                            <small>Analogous (-30¬∞)</small>
                        </div>
                    </div>
                </div>
                <div class="demo-code">
                    <div class="demo-code-label">CSS Variables</div>
                    <pre>--primary: hsl(240, 70%, 50%);       /* Base hue */
--secondary: hsl(60, 60%, 50%);      /* +180¬∞ complementary */
--accent: hsl(210, 60%, 50%);        /* -30¬∞ analogous */</pre>
                </div>
            </section>

            <!-- SEMANTIC MESSAGES -->
            <section class="demo-section">
                <h2>üí¨ Semantic Messages</h2>
                <p>State colors based on color psychology for intuitive communication.</p>
                
                <div class="demo-render demo-render--column">
                    <div class="message-stack">
                        <div class="message message-success">
                            <strong>‚úÖ Success</strong>
                            Your changes have been saved successfully!
                        </div>
                        <div class="message message-info">
                            <strong>‚ÑπÔ∏è Info</strong>
                            Control panel changes apply to ALL body elements.
                        </div>
                        <div class="message message-warning">
                            <strong>‚ö†Ô∏è Warning</strong>
                            Some settings are saved to localStorage.
                        </div>
                        <div class="message message-error">
                            <strong>‚ùå Error</strong>
                            Unable to connect. Please check your network.
                        </div>
                    </div>
                </div>
                <div class="demo-code">
                    <div class="demo-code-label">CSS Variables</div>
                    <pre>--success-color: #22c55e;  /* Green - positive */
--info-color: #0ea5e9;     /* Blue - informational */
--warning-color: #f59e0b;  /* Amber - caution */
--error-color: #ef4444;    /* Red - danger */</pre>
                </div>
            </section>

            <!-- INTERACTIVE BUTTONS -->
            <section class="demo-section">
                <h2>üîò Interactive Buttons</h2>
                <p>Buttons styled with the color system. Hover to see effects.</p>
                
                <div class="demo-render">
                    <button class="demo-button demo-button--primary">Primary</button>
                    <button class="demo-button demo-button--secondary">Secondary</button>
                    <button class="demo-button demo-button--accent">Accent</button>
                    <button class="demo-button demo-button--success">Success</button>
                    <button class="demo-button demo-button--warning">Warning</button>
                    <button class="demo-button demo-button--error">Danger</button>
                </div>
                <div class="demo-code">
                    <div class="demo-code-label">CSS</div>
                    <pre>.demo-button--primary { background: var(--primary); }
.demo-button--secondary { background: var(--secondary-color); }
.demo-button--accent { background: var(--accent); }
.demo-button--success { background: var(--success-color); }
.demo-button--warning { background: var(--warning-color); }
.demo-button--error { background: var(--error-color); }</pre>
                </div>
            </section>

            <!-- MODE TOGGLE -->
            <section class="demo-section">
                <h2>üåó Dark/Light Mode Toggle</h2>
                <p>The mode toggle button uses SVG icons (no text). Moon for dark mode, sun for light mode.</p>
                
                <div class="demo-render">
                    <div class="demo-info-box">
                        <p>Click the circular button in the control panel header:</p>
                        <ul class="demo-list">
                            <li>üåô Moon icon = Dark mode</li>
                            <li>‚òÄÔ∏è Sun icon = Light mode</li>
                        </ul>
                    </div>
                </div>
                <div class="demo-code">
                    <div class="demo-code-label">Behavior</div>
                    <pre>// Mode toggle applies to entire document
document.documentElement.setAttribute('data-mode', mode);
document.body.setAttribute('data-mode', mode);

// Text colors adjust automatically
--text-primary: dark ? #f8fafc : #1e293b;
--text-secondary: dark ? #94a3b8 : #64748b;</pre>
                </div>
            </section>

            <!-- EVENTS -->
            <section class="demo-section">
                <h2>üì¢ Events Dispatched</h2>
                <p>The control panel fires custom events that other components can listen to.</p>
                
                <div class="demo-render demo-render--column">
                    <div id="event-log" class="event-log">
                        <em>Event log will appear here when you interact with the control panel...</em>
                    </div>
                </div>
                <div class="demo-code">
                    <div class="demo-code-label">JavaScript</div>
                    <pre>// Listen for mode changes
document.addEventListener('wb:mode-changed', (e) => {
    console.log('Mode:', e.detail.mode); // 'dark' or 'light'
});

// Listen for color changes
document.addEventListener('wb:color-changed', (e) => {
    console.log('Hue:', e.detail.hue);
    console.log('Saturation:', e.detail.saturation);
    console.log('Lightness:', e.detail.lightness);
});

// Listen for theme applied (all colors updated)
document.addEventListener('wb:theme-applied', (e) => {
    console.log('Theme applied:', e.detail);
});</pre>
                </div>
            </section>

            <!-- HOW IT WORKS -->
            <section class="demo-section">
                <h2>‚öôÔ∏è How Document-Wide Theming Works</h2>
                <p>The control panel sets CSS variables on <code class="inline-code">document.documentElement</code> so all elements inherit them.</p>
                
                <div class="demo-render demo-render--column">
                    <div class="code-block">
                        <pre>/* Applied to :root by control panel */

/* Primary Colors */
--primary: hsl(240, 70%, 50%);
--primary-dark: hsl(240, 70%, 35%);
--primary-light: hsl(240, 50%, 75%);
--primary-rgb: 99, 102, 241;

/* Background */
--bg-color: hsl(220, 20%, 15%);
--bg-primary: hsl(220, 18%, 22%);
--bg-secondary: hsl(220, 16%, 30%);

/* Text (Mode-aware) */
--text-primary: hsl(240, 5%, 98%);
--text-secondary: hsl(240, 15%, 85%);
--text-muted: hsl(240, 25%, 65%);

/* Borders */
--border-color: hsl(240, 6%, 35%);</pre>
                    </div>
                </div>
                <div class="demo-code">
                    <div class="demo-code-label">Key Method</div>
                    <pre>applyColorsToDocument() {
    const root = document.documentElement;
    
    // Set CSS variables on :root
    root.style.setProperty('--primary', `hsl(...)`);
    root.style.setProperty('--bg-color', `hsl(...)`);
    
    // Dispatch event for other components
    document.dispatchEvent(new CustomEvent('wb:theme-applied', {...}));
}</pre>
                </div>
            </section>

        </div>
    </wb-demo>
    
    <!-- Floating Control Panel - placed outside wb-demo -->
    <wb-control-panel></wb-control-panel>
    
    <script>
        // Log events from control panel
        const eventLog = document.getElementById('event-log');
        let eventCount = 0;
        const maxEvents = 15;
        
        function logEvent(name, detail) {
            eventCount++;
            const time = new Date().toLocaleTimeString();
            const entry = document.createElement('div');
            entry.className = 'event-entry';
            entry.innerHTML = `<span class="event-time">[${time}]</span> <span class="event-name">${name}</span>`;
            
            if (detail) {
                const detailStr = JSON.stringify(detail, null, 0).substring(0, 80);
                entry.innerHTML += `<br><span class="event-detail">${detailStr}...</span>`;
            }
            
            if (eventCount === 1) {
                eventLog.innerHTML = '';
            }
            
            eventLog.insertBefore(entry, eventLog.firstChild);
            
            while (eventLog.children.length > maxEvents) {
                eventLog.removeChild(eventLog.lastChild);
            }
        }
        
        document.addEventListener('wb:mode-changed', (e) => logEvent('wb:mode-changed', e.detail));
        document.addEventListener('wb:color-changed', (e) => logEvent('wb:color-changed', e.detail));
        document.addEventListener('wb:background-color-changed', (e) => logEvent('wb:background-color-changed', e.detail));
        document.addEventListener('wb:theme-changed', (e) => logEvent('wb:theme-changed', e.detail));
        document.addEventListener('wb:theme-applied', (e) => logEvent('wb:theme-applied', e.detail));
        document.addEventListener('wb:layout-changed', (e) => logEvent('wb:layout-changed', e.detail));
    </script>
</body>
</html>
