{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "WB Event Log Schema",
  "description": "Schema for wb-event-log component events and configuration",
  "type": "object",
  "definitions": {
    "EventType": {
      "type": "string",
      "enum": ["info", "warning", "error", "success", "debug", "trace"],
      "description": "Type of event being logged"
    },
    "EventLevel": {
      "type": "string",
      "enum": ["low", "medium", "high", "critical"],
      "description": "Severity level of the event"
    },
    "EventSource": {
      "type": "object",
      "properties": {
        "component": {
          "type": "string",
          "description": "Name of the component that generated the event"
        },
        "module": {
          "type": "string",
          "description": "Module or service name"
        },
        "function": {
          "type": "string",
          "description": "Function or method that triggered the event"
        },
        "line": {
          "type": "number",
          "description": "Line number in source code (if available)"
        }
      },
      "required": ["component"],
      "additionalProperties": false
    },
    "EventMetadata": {
      "type": "object",
      "properties": {
        "user": {
          "type": "string",
          "description": "User ID or identifier associated with the event"
        },
        "session": {
          "type": "string",
          "description": "Session ID"
        },
        "request": {
          "type": "string",
          "description": "Request ID for tracing"
        },
        "duration": {
          "type": "number",
          "description": "Duration in milliseconds (for performance events)"
        },
        "memory": {
          "type": "number",
          "description": "Memory usage in bytes"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Custom tags for categorization"
        }
      },
      "additionalProperties": true
    },
    "EventData": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique event identifier"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when the event occurred"
        },
        "type": {
          "$ref": "#/definitions/EventType"
        },
        "level": {
          "$ref": "#/definitions/EventLevel"
        },
        "message": {
          "type": "string",
          "description": "Human-readable event message",
          "minLength": 1
        },
        "details": {
          "type": "string",
          "description": "Additional details or context"
        },
        "source": {
          "$ref": "#/definitions/EventSource"
        },
        "metadata": {
          "$ref": "#/definitions/EventMetadata"
        },
        "error": {
          "type": "object",
          "properties": {
            "code": {
              "type": "string",
              "description": "Error code"
            },
            "name": {
              "type": "string",
              "description": "Error name or type"
            },
            "message": {
              "type": "string",
              "description": "Error message"
            },
            "stack": {
              "type": "string",
              "description": "Stack trace"
            }
          },
          "description": "Error details (for error events)"
        },
        "data": {
          "type": "object",
          "description": "Additional structured data related to the event",
          "additionalProperties": true
        }
      },
      "required": ["id", "timestamp", "type", "message"],
      "additionalProperties": false
    },
    "ComponentConfig": {
      "type": "object",
      "properties": {
        "maxEvents": {
          "type": "number",
          "minimum": 1,
          "maximum": 10000,
          "default": 1000,
          "description": "Maximum number of events to store"
        },
        "autoScroll": {
          "type": "boolean",
          "default": true,
          "description": "Automatically scroll to newest events"
        },
        "wrapMode": {
          "type": "string",
          "enum": ["wrap", "nowrap", "break"],
          "default": "wrap",
          "description": "Text wrapping behavior"
        },
        "theme": {
          "type": "string",
          "enum": ["light", "dark", "auto"],
          "default": "auto",
          "description": "Visual theme"
        },
        "filters": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/EventType"
          },
          "default": ["info", "warning", "error", "success"],
          "description": "Event types to display"
        },
        "searchPlaceholder": {
          "type": "string",
          "default": "Search events...",
          "description": "Placeholder text for search input"
        },
        "exportFormats": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["json", "csv", "txt", "xml"]
          },
          "default": ["json", "csv", "txt"],
          "description": "Available export formats"
        },
        "dateFormat": {
          "type": "string",
          "default": "YYYY-MM-DD HH:mm:ss",
          "description": "Date format for display"
        },
        "groupBy": {
          "type": "string",
          "enum": ["none", "type", "source", "level", "time"],
          "default": "none",
          "description": "Group events by specified field"
        }
      },
      "additionalProperties": false
    },
    "ExportData": {
      "type": "object",
      "properties": {
        "format": {
          "type": "string",
          "enum": ["json", "csv", "txt", "xml"]
        },
        "events": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/EventData"
          }
        },
        "metadata": {
          "type": "object",
          "properties": {
            "exportedAt": {
              "type": "string",
              "format": "date-time"
            },
            "totalEvents": {
              "type": "number"
            },
            "filteredEvents": {
              "type": "number"
            },
            "timeRange": {
              "type": "object",
              "properties": {
                "start": {
                  "type": "string",
                  "format": "date-time"
                },
                "end": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            }
          }
        }
      },
      "required": ["format", "events"],
      "additionalProperties": false
    }
  },
  "properties": {
    "config": {
      "$ref": "#/definitions/ComponentConfig",
      "description": "Component configuration"
    },
    "events": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/EventData"
      },
      "description": "Array of event data"
    },
    "export": {
      "$ref": "#/definitions/ExportData",
      "description": "Export data structure"
    }
  },
  "additionalProperties": false
}