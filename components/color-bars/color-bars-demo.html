<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Bars Component Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 2rem;
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .demo-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }
        
        .demo-card h3 {
            margin-top: 0;
            color: #4a5568;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
        }
        
        .color-output {
            margin-top: 1rem;
            padding: 1rem;
            background: #f7fafc;
            border-radius: 8px;
            border-left: 4px solid #4299e1;
        }
        
        .color-output h4 {
            margin: 0 0 0.5rem 0;
            color: #2d3748;
        }
        
        .color-values {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .color-preview-box {
            width: 100%;
            height: 60px;
            border-radius: 8px;
            margin: 1rem 0;
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background: #4299e1;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .theme-toggle:hover {
            background: #3182ce;
        }
        
        /* Dark theme */
        body.dark {
            background: #1a202c;
            color: #e2e8f0;
        }
        
        body.dark .demo-card {
            background: #2d3748;
            border-color: #4a5568;
        }
        
        body.dark .color-output {
            background: #4a5568;
            border-left-color: #63b3ed;
        }
        
        body.dark h1,
        body.dark .demo-card h3,
        body.dark .color-output h4 {
            color: #e2e8f0;
        }
        
        body.dark .demo-card h3 {
            border-bottom-color: #4a5568;
        }
        
        .api-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        body.dark .api-section {
            background: #2d3748;
            color: #e2e8f0;
        }
        
        .api-section h2 {
            color: #2d3748;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
        }
        
        body.dark .api-section h2 {
            color: #e2e8f0;
            border-bottom-color: #4a5568;
        }
        
        pre {
            background: #f7fafc;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
        }
        
        body.dark pre {
            background: #4a5568;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        body.dark .feature-list li {
            border-bottom-color: #4a5568;
        }
        
        .feature-list li:before {
            content: "âœ“";
            color: #48bb78;
            font-weight: bold;
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™ Toggle Theme</button>
    
    <div class="container">
        <h1>ðŸŽ¨ Color Bars Component Demo</h1>
        
        <div class="demo-grid">
            <!-- Basic Usage -->
            <div class="demo-card">
                <h3>Basic Usage</h3>
                <color-bars id="basic-color" label="Basic Color Picker" theme="dark"></color-bars>
                <div class="color-output">
                    <h4>Selected Color:</h4>
                    <div class="color-preview-box" id="basic-preview"></div>
                    <div class="color-values" id="basic-values">
                        HSL: hsl(240, 70%, 50%)<br>
                        HEX: #6366f1<br>
                        RGB: rgb(99, 102, 241)
                    </div>
                </div>
            </div>
            
            <!-- Custom Initial Values -->
            <div class="demo-card">
                <h3>Custom Initial Values</h3>
                <color-bars id="custom-color" label="Custom Color" hue="120" saturation="80" lightness="60" theme="dark"></color-bars>
                <div class="color-output">
                    <h4>Selected Color:</h4>
                    <div class="color-preview-box" id="custom-preview"></div>
                    <div class="color-values" id="custom-values">
                        HSL: hsl(120, 80%, 60%)<br>
                        HEX: #66e066<br>
                        RGB: rgb(102, 224, 102)
                    </div>
                </div>
            </div>
            
            <!-- Primary Theme Color -->
            <div class="demo-card">
                <h3>Primary Theme Color</h3>
                <color-bars id="primary-color" label="Primary Color" hue="210" saturation="75" lightness="55" theme="dark"></color-bars>
                <div class="color-output">
                    <h4>Theme Preview:</h4>
                    <select id="theme-selector" style="margin-bottom: 1rem; padding: 0.5rem; border-radius: 4px; background: var(--bg-secondary); color: var(--text-primary); border: 1px solid var(--border-color);">
                        <option value="material">Material Design</option>
                        <option value="ocean">Ocean Blue</option>
                        <option value="forest">Forest Green</option>
                        <option value="sunset">Sunset Orange</option>
                        <option value="purple">Purple Theme</option>
                        <option value="custom" selected>Custom Theme</option>
                    </select>
                    <div class="color-preview-box" id="primary-preview"></div>
                    <div class="color-values" id="primary-values">
                        HSL: hsl(210, 75%, 55%)<br>
                        HEX: #4a90e2<br>
                        RGB: rgb(74, 144, 226)
                    </div>
                </div>
            </div>
            
            <!-- Accent Color (Auto-generated) -->
            <div class="demo-card">
                <h3>Accent Color (Auto-generated)</h3>
                <p>Accent color is automatically calculated as a complementary color to the primary theme color:</p>
                <div class="color-output">
                    <h4>Accent Preview:</h4>
                    <div class="color-preview-box" id="accent-preview"></div>
                    <div class="color-values" id="accent-values">
                        HSL: hsl(30, 75%, 55%)<br>
                        HEX: #e2904a<br>
                        RGB: rgb(226, 144, 74)
                    </div>
                </div>
            </div>
        </div>
        
        <!-- API Documentation -->
        <div class="api-section">
            <h2>ðŸ”§ API Reference</h2>
            
            <h3>Attributes</h3>
            <ul class="feature-list">
                <li><strong>hue</strong>: Initial hue value (0-360 degrees)</li>
                <li><strong>saturation</strong>: Initial saturation percentage (0-100%)</li>
                <li><strong>lightness</strong>: Initial lightness percentage (0-100%)</li>
                <li><strong>label</strong>: Label text for the color picker</li>
                <li><strong>theme</strong>: Theme variant ('light' or 'dark')</li>
                <li><strong>disabled</strong>: Disables the color picker</li>
            </ul>
            
            <h3>Events</h3>
            <ul class="feature-list">
                <li><strong>colorchange</strong>: Fired when color changes (real-time)</li>
                <li><strong>colorselect</strong>: Fired when user finishes selecting</li>
                <li><strong>colorcopied</strong>: Fired when hex value is copied</li>
            </ul>
            
            <h3>Usage Example</h3>
            <pre><code>&lt;color-bars id="my-color" hue="240" saturation="70" lightness="50"&gt;&lt;/color-bars&gt;

&lt;script&gt;
const colorPicker = document.getElementById('my-color');

colorPicker.addEventListener('colorchange', (e) => {
    console.log('Color changed:', e.detail);
    // e.detail contains: { hue, saturation, lightness, hsl, hex, rgb }
});

colorPicker.addEventListener('colorselect', (e) => {
    console.log('Color selected:', e.detail.hex);
});

// Programmatic control
colorPicker.setColor(180, 60, 40);
console.log('Current color:', colorPicker.color);
&lt;/script&gt;</code></pre>
            
            <h3>Features</h3>
            <ul class="feature-list">
                <li>Interactive HSL color selection with three bars</li>
                <li>Real-time color preview and value display</li>
                <li>Mouse, touch, and keyboard support</li>
                <li>Copy to clipboard functionality</li>
                <li>Accessibility features and ARIA support</li>
                <li>Theme support (light/dark modes)</li>
                <li>Material Design inspired interface</li>
                <li>Responsive design for all screen sizes</li>
            </ul>
        </div>
    </div>
    
    <script src="../color-bar/color-bar.js"></script>
    <script src="color-bars.js"></script>
    <script>
        // Predefined themes
        const themes = {
            material: { hue: 240, saturation: 70, lightness: 50 }, // Material Blue
            ocean: { hue: 200, saturation: 80, lightness: 45 },     // Ocean Blue
            forest: { hue: 120, saturation: 60, lightness: 40 },    // Forest Green
            sunset: { hue: 25, saturation: 85, lightness: 55 },     // Sunset Orange
            purple: { hue: 280, saturation: 75, lightness: 50 }     // Purple
        };
        
        // Initialize all color pickers
        const colorPickers = [
            { id: 'basic-color', previewId: 'basic-preview', valuesId: 'basic-values' },
            { id: 'custom-color', previewId: 'custom-preview', valuesId: 'custom-values' },
            { id: 'primary-color', previewId: 'primary-preview', valuesId: 'primary-values' }
        ];
        
        // Function to calculate complementary accent color
        function calculateAccentColor(primaryHue, primarySaturation, primaryLightness) {
            // Calculate complementary hue (opposite on color wheel)
            const accentHue = (primaryHue + 180) % 360;
            // Keep similar saturation and lightness for harmony
            const accentSaturation = Math.max(60, primarySaturation - 10);
            const accentLightness = primaryLightness > 50 ? primaryLightness - 15 : primaryLightness + 15;
            
            return { hue: accentHue, saturation: accentSaturation, lightness: accentLightness };
        }
        
        // Function to convert HSL to hex
        function hslToHex(h, s, l) {
            h /= 360;
            s /= 100;
            l /= 100;
            
            const a = s * Math.min(l, 1 - l);
            const f = n => {
                const k = (n + h / (1/12)) % 12;
                const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
                return Math.round(255 * color);
            };
            
            const r = f(0);
            const g = f(8);
            const b = f(4);
            
            return \`#\${[r, g, b].map(x => x.toString(16).padStart(2, '0')).join('')}\`;
        }
        
        // Function to update accent color display
        function updateAccentDisplay(primaryColor) {
            const accent = calculateAccentColor(primaryColor.hue, primaryColor.saturation, primaryColor.lightness);
            const accentHex = hslToHex(accent.hue, accent.saturation, accent.lightness);
            const accentHsl = \`hsl(\${accent.hue}, \${accent.saturation}%, \${accent.lightness}%)\`;
            
            const accentPreview = document.getElementById('accent-preview');
            const accentValues = document.getElementById('accent-values');
            
            if (accentPreview) {
                accentPreview.style.backgroundColor = accentHex;
                accentPreview.style.color = accentHex;
            }
            
            if (accentValues) {
                accentValues.innerHTML = \`
                    HSL: \${accentHsl}<br>
                    HEX: \${accentHex}<br>
                    RGB: rgb(\${Math.round(accent.hue)}, \${accent.saturation}, \${accent.lightness})
                \`;
            }
        }
        
        // Wait for components to be fully loaded
        setTimeout(() => {
            colorPickers.forEach(({ id, previewId, valuesId }) => {
                const picker = document.getElementById(id);
                const preview = document.getElementById(previewId);
                const values = document.getElementById(valuesId);
                
                if (!picker || !preview || !values) return;
                
                function updateDisplay(colorData) {
                    preview.style.backgroundColor = colorData.hex;
                    preview.style.color = colorData.hex;
                    values.innerHTML = \`
                        HSL: \${colorData.hsl}<br>
                        HEX: \${colorData.hex}<br>
                        RGB: rgb(\${colorData.rgb.r}, \${colorData.rgb.g}, \${colorData.rgb.b})
                    \`;
                }
                
                picker.addEventListener('colorchange', (e) => {
                    updateDisplay(e.detail);
                    
                    // If this is the primary color picker, update the accent color
                    if (id === 'primary-color') {
                        updateAccentDisplay(e.detail);
                    }
                });
                
                picker.addEventListener('colorselect', (e) => {
                    console.log(\`\${id} selected:\`, e.detail.hex);
                });
                
                picker.addEventListener('colorcopied', (e) => {
                    console.log(\`Copied \${e.detail.hex} to clipboard\`);
                });
                
                // Initialize display with current color
                const currentColor = picker.color;
                if (currentColor) {
                    updateDisplay(currentColor);
                    
                    // If this is the primary color picker, also initialize accent color
                    if (id === 'primary-color') {
                        updateAccentDisplay(currentColor);
                    }
                }
            });
            
            // Theme selector functionality
            const themeSelector = document.getElementById('theme-selector');
            const primaryPicker = document.getElementById('primary-color');
            
            if (themeSelector && primaryPicker) {
                themeSelector.addEventListener('change', (e) => {
                    const selectedTheme = e.target.value;
                    
                    if (selectedTheme !== 'custom' && themes[selectedTheme]) {
                        const theme = themes[selectedTheme];
                        primaryPicker.setColor(theme.hue, theme.saturation, theme.lightness);
                        
                        // Update the selector to show this is no longer custom
                        e.target.value = selectedTheme;
                    }
                });
                
                // Listen for manual changes to set selector back to custom
                primaryPicker.addEventListener('colorchange', () => {
                    // Set timeout to avoid conflicts with theme selector changes
                    setTimeout(() => {
                        themeSelector.value = 'custom';
                    }, 100);
                });
            }
            
        }, 500); // Increased timeout to ensure color-bar components are ready
        
        // Theme toggle functionality
        function toggleTheme() {
            const body = document.body;
            const isDark = body.classList.contains('dark');
            
            if (isDark) {
                body.classList.remove('dark');
                // Update all color-bars to light theme
                document.querySelectorAll('color-bars').forEach(picker => {
                    picker.setAttribute('theme', 'light');
                });
            } else {
                body.classList.add('dark');
                // Update all color-bars to dark theme
                document.querySelectorAll('color-bars').forEach(picker => {
                    picker.setAttribute('theme', 'dark');
                });
            }
        }
        
        // Demo console logging
        console.log('ðŸŽ¨ Color Bars Demo loaded');
        console.log('Try changing colors and check the console for events!');
        
        // Initialize to dark mode by default
        document.body.classList.add('dark');
        document.querySelectorAll('color-bars').forEach(picker => {
            picker.setAttribute('theme', 'dark');
        });
        
    </script>
</body>
</html>