<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Bars Simple Test</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <style>
        body {
            padding: 20px;
            background: var(--bg-primary, #1a1a1a);
            color: var(--text-primary, #ffffff);
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .demo-text {
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #333;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Color Bars Component Test</h1>
        
        <p>This is a simple test to verify the wb-color-bars component works.</p>
        
        <!-- Test wb-color-bars component -->
        <wb-color-bars 
            id="test-color-bars"
            text-hue="240" 
            text-saturation="70" 
            text-lightness="90"
            bg-hue="240"
            bg-saturation="40" 
            bg-lightness="20"
            theme="dark">
        </wb-color-bars>
        
        <div class="demo-text" id="demo-text">
            <h2>Sample Text</h2>
            <p>This text should change color when you adjust the color bars above.</p>
        </div>
        
        <div id="debug-info">
            <h3>Debug Info:</h3>
            <pre id="debug-output">Loading...</pre>
        </div>
    </div>
    
    <!-- Load utilities first -->
    <script src="../../utils/wb/wb-component-utils.js"></script>
    
    <!-- Debug script -->
    <script>
        console.log('ðŸ”§ Testing wb-color-bars component...');
        
        // Check if utilities loaded
        setTimeout(() => {
            const debugOutput = document.getElementById('debug-output');
            let debug = '';
            
            debug += 'WBComponentUtils available: ' + (window.WBComponentUtils ? 'YES' : 'NO') + '\n';
            debug += 'ColorUtils available: ' + (window.WBComponentUtils?.ColorUtils ? 'YES' : 'NO') + '\n';
            debug += 'wb-color-bar defined: ' + (customElements.get('wb-color-bar') ? 'YES' : 'NO') + '\n';
            debug += 'wb-color-bars defined: ' + (customElements.get('wb-color-bars') ? 'YES' : 'NO') + '\n';
            
            debugOutput.textContent = debug;
        }, 1000);
    </script>
    
    <!-- Load components -->
    <script src="../color-bar/wb-color-bar.js"></script>
    <script src="wb-color-bars.js"></script>
    
    <!-- Test script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const colorBars = document.getElementById('test-color-bars');
            const demoText = document.getElementById('demo-text');
            
            if (colorBars) {
                console.log('Color bars element found:', colorBars);
                
                // Listen for color change events
                colorBars.addEventListener('textcolorchange', (e) => {
                    console.log('Text color changed:', e.detail);
                    const color = `hsl(${e.detail.hue}, ${e.detail.saturation}%, ${e.detail.lightness}%)`;
                    demoText.style.color = color;
                });
                
                colorBars.addEventListener('bgcolorchange', (e) => {
                    console.log('Background color changed:', e.detail);
                    const color = `hsl(${e.detail.hue}, ${e.detail.saturation}%, ${e.detail.lightness}%)`;
                    demoText.style.backgroundColor = color;
                });
                
                console.log('Event listeners attached');
            } else {
                console.error('Color bars element not found');
            }
        });
    </script>
</body>
</html>