<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Generator</title>
    <link rel="stylesheet" href="../../css/bootstrap.css">
    <link rel="stylesheet" href="../../css/custom.css">
    <style>
        /* Floating panel styles */
        .floating-panel {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            width: 350px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            resize: both;
            overflow: auto;
            max-height: 80vh;
        }
        
        .panel-controls {
            display: flex;
            gap: 5px;
        }
        
        .panel-header {
            cursor: move;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .minimized .card-body {
            display: none !important;
        }
        
        /* Set default dark theme */
        body {
            background-color: #212529;
            color: #f8f9fa;
        }
        
        .card {
            background-color: #343a40;
            color: #f8f9fa;
            border-color: #495057;
        }
        
        .card-header {
            background-color: #212529;
            border-color: #495057;
        }
        
        .form-control {
            background-color: #495057;
            color: #f8f9fa;
            border-color: #6c757d;
        }
        
        .form-control:focus {
            background-color: #495057;
            color: #f8f9fa;
        }
        
        .color-box {
            width: 50px;
            height: 50px;
            margin: 5px;
            border: 1px solid #ccc;
            display: inline-block;
            cursor: pointer;
        }
        
        .color-palette {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .preview-section {
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #ddd;
        }

        .theme-preview {
            margin-top: 30px;
        }

        #colorSchemePreview {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        #colorSchemePreview div {
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 0 0 3px rgba(0,0,0,0.5);
        }

        /* Table theme styles */
        .table-theme {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .table-theme th {
            background-color: var(--primary);
            color: var(--light);
            padding: 12px;
            text-align: left;
        }

        .table-theme tr:nth-child(even) {
            background-color: var(--light);
        }

        .table-theme tr:nth-child(odd) {
            background-color: var(--bg-alt);
        }

        .table-theme td {
            padding: 10px;
            border-bottom: 1px solid var(--border);
        }

        .table-theme tr:hover {
            background-color: var(--hover);
        }

        #exportSection {
            margin-top: 40px;
            padding: 20px;
            background-color: #343a40;
            border-radius: 5px;
        }

        #cssOutput {
            width: 100%;
            height: 300px;
            font-family: monospace;
            margin-top: 20px;
            background-color: #212529;
            color: #f8f9fa;
            border-color: #495057;
        }
        
        /* Compact control panel */
        #controlPanel .form-group {
            margin-bottom: 10px;
        }
        
        #controlPanel label {
            margin-bottom: 3px;
            font-size: 0.9rem;
        }
        
        #controlPanel .btn {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }
        
        #controlPanel .card-body {
            padding: 0.75rem;
        }
        
        #controlPanel h3 {
            font-size: 1.2rem;
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mt-4 mb-4">Theme Generator</h1>
        
        <div class="row">
            <div class="col-md-6">
                <div id="controlPanel" class="card floating-panel">
                    <div class="card-header panel-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h3>Control Panel</h3>
                            <div class="panel-controls">
                                <button id="minimizePanel" class="btn btn-sm btn-outline-secondary" title="Minimize">_</button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="baseColor">Base Color:</label>
                            <input type="color" id="baseColor" class="form-control" value="#0072c6">
                        </div>
                        
                        <div class="form-group mt-2">
                            <label>Color Scheme:</label>
                            <select id="colorScheme" class="form-control">
                                <option value="monochromatic">Monochromatic</option>
                                <option value="analogous">Analogous</option>
                                <option value="complementary">Complementary</option>
                                <option value="triadic">Triadic</option>
                            </select>
                        </div>
                        
                        <div id="colorSchemePreview" class="mt-2"></div>
                        
                        <div class="form-group mt-2">
                            <label for="fontFamily">Font Family:</label>
                            <select id="fontFamily" class="form-control">
                                <option value="'Arial', sans-serif">Arial</option>
                                <option value="'Helvetica', sans-serif">Helvetica</option>
                                <option value="'Open Sans', sans-serif">Open Sans</option>
                                <option value="'Roboto', sans-serif">Roboto</option>
                                <option value="'Georgia', serif">Georgia</option>
                                <option value="'Times New Roman', serif">Times New Roman</option>
                            </select>
                        </div>
                        
                        <div class="form-group mt-2">
                            <label for="borderRadius">Border Radius:</label>
                            <input type="range" id="borderRadius" class="form-range" min="0" max="20" value="4">
                            <span id="borderRadiusValue">4px</span>
                        </div>
                        
                        <button id="generateTheme" class="btn btn-primary mt-2">Generate Theme</button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card theme-preview">
                    <div class="card-header">
                        <h3>Theme Preview</h3>
                    </div>
                    <div class="card-body">
                        <div class="preview-section">
                            <h4>Buttons</h4>
                            <button class="btn btn-primary">Primary</button>
                            <button class="btn btn-secondary">Secondary</button>
                            <button class="btn btn-success">Success</button>
                            <button class="btn btn-danger">Danger</button>
                        </div>
                        
                        <div class="preview-section">
                            <h4>Typography</h4>
                            <h1>Heading 1</h1>
                            <h2>Heading 2</h2>
                            <p>This is a paragraph of text that demonstrates the typography styles of the theme.</p>
                            <a href="#">This is a link</a>
                        </div>
                        
                        <div class="preview-section">
                            <h4>Form Elements</h4>
                            <input type="text" class="form-control mb-2" placeholder="Text input">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="exampleCheck1">
                                <label class="form-check-label" for="exampleCheck1">Check me out</label>
                            </div>
                        </div>

                        <div class="preview-section">
                            <h4>Table</h4>
                            <table class="table-theme">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Position</th>
                                        <th>Office</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>John Doe</td>
                                        <td>Developer</td>
                                        <td>New York</td>
                                    </tr>
                                    <tr>
                                        <td>Jane Smith</td>
                                        <td>Designer</td>
                                        <td>London</td>
                                    </tr>
                                    <tr>
                                        <td>Bob Johnson</td>
                                        <td>Manager</td>
                                        <td>Paris</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="exportSection">
            <h3>Export Theme</h3>
            <div class="d-flex">
                <button id="exportCSS" class="btn btn-success me-2">Export CSS</button>
                <button id="exportComponent" class="btn btn-info">Export as Component</button>
            </div>
            <textarea id="cssOutput" class="mt-3" readonly></textarea>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const baseColorInput = document.getElementById('baseColor');
            const colorSchemeSelect = document.getElementById('colorScheme');
            const fontFamilySelect = document.getElementById('fontFamily');
            const borderRadiusInput = document.getElementById('borderRadius');
            const borderRadiusValue = document.getElementById('borderRadiusValue');
            const generateThemeBtn = document.getElementById('generateTheme');
            const exportCSSBtn = document.getElementById('exportCSS');
            const exportComponentBtn = document.getElementById('exportComponent');
            const cssOutput = document.getElementById('cssOutput');
            const colorSchemePreview = document.getElementById('colorSchemePreview');
            
            // Update border radius value display
            borderRadiusInput.addEventListener('input', function() {
                borderRadiusValue.textContent = this.value + 'px';
            });
            
            // Generate color schemes based on base color
            function generateColorScheme(baseColor, scheme) {
                // Convert hex to HSL
                function hexToHSL(hex) {
                    let r = parseInt(hex.slice(1, 3), 16) / 255;
                    let g = parseInt(hex.slice(3, 5), 16) / 255;
                    let b = parseInt(hex.slice(5, 7), 16) / 255;
                    
                    let max = Math.max(r, g, b);
                    let min = Math.min(r, g, b);
                    let h, s, l = (max + min) / 2;
                    
                    if (max === min) {
                        h = s = 0; // achromatic
                    } else {
                        let d = max - min;
                        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                        switch (max) {
                            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                            case g: h = (b - r) / d + 2; break;
                            case b: h = (r - g) / d + 4; break;
                        }
                        h /= 6;
                    }
                    
                    return [h * 360, s * 100, l * 100];
                }
                
                // Convert HSL to hex
                function hslToHex(h, s, l) {
                    h /= 360;
                    s /= 100;
                    l /= 100;
                    let r, g, b;
                    
                    if (s === 0) {
                        r = g = b = l; // achromatic
                    } else {
                        const hue2rgb = (p, q, t) => {
                            if (t < 0) t += 1;
                            if (t > 1) t -= 1;
                            if (t < 1/6) return p + (q - p) * 6 * t;
                            if (t < 1/2) return q;
                            if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                            return p;
                        };
                        
                        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                        const p = 2 * l - q;
                        r = hue2rgb(p, q, h + 1/3);
                        g = hue2rgb(p, q, h);
                        b = hue2rgb(p, q, h - 1/3);
                    }
                    
                    const toHex = x => {
                        const hex = Math.round(x * 255).toString(16);
                        return hex.length === 1 ? '0' + hex : hex;
                    };
                    
                    return `#${toHex(r)}${toHex(g)}${toHex(b)}`;
                }
                
                const [h, s, l] = hexToHSL(baseColor);
                let colors = [];
                
                switch (scheme) {
                    case 'monochromatic':
                        colors = [
                            baseColor,
                            hslToHex(h, s, l * 0.8),
                            hslToHex(h, s * 0.6, l),
                            hslToHex(h, s, l * 1.2),
                            hslToHex(h, s * 0.8, l * 0.9)
                        ];
                        break;
                    case 'analogous':
                        colors = [
                            baseColor,
                            hslToHex((h + 30) % 360, s, l),
                            hslToHex((h - 30 + 360) % 360, s, l),
                            hslToHex((h + 60) % 360, s, l),
                            hslToHex((h - 60 + 360) % 360, s, l)
                        ];
                        break;
                    case 'complementary':
                        colors = [
                            baseColor,
                            hslToHex((h + 180) % 360, s, l),
                            hslToHex(h, s * 0.7, l * 1.2),
                            hslToHex((h + 180) % 360, s * 0.7, l * 1.2),
                            hslToHex(h, s, l * 0.8)
                        ];
                        break;
                    case 'triadic':
                        colors = [
                            baseColor,
                            hslToHex((h + 120) % 360, s, l),
                            hslToHex((h + 240) % 360, s, l),
                            hslToHex(h, s * 0.7, l * 1.2),
                            hslToHex((h + 120) % 360, s * 0.7, l * 0.8)
                        ];
                        break;
                }
                
                return colors;
            }
            
            // Update color scheme preview
            function updateColorSchemePreview() {
                const baseColor = baseColorInput.value;
                const scheme = colorSchemeSelect.value;
                const colors = generateColorScheme(baseColor, scheme);
                
                colorSchemePreview.innerHTML = '';
                colors.forEach((color, index) => {
                    const colorDiv = document.createElement('div');
                    colorDiv.style.backgroundColor = color;
                    colorDiv.textContent = color;
                    colorSchemePreview.appendChild(colorDiv);
                });
            }
            
            // Update color scheme preview when inputs change
            baseColorInput.addEventListener('input', updateColorSchemePreview);
            colorSchemeSelect.addEventListener('change', updateColorSchemePreview);
            
            // Initial color scheme preview
            updateColorSchemePreview();
            
            // Generate and apply theme
            generateThemeBtn.addEventListener('click', function() {
                const baseColor = baseColorInput.value;
                const scheme = colorSchemeSelect.value;
                const fontFamily = fontFamilySelect.value;
                const borderRadius = borderRadiusInput.value + 'px';
                const colors = generateColorScheme(baseColor, scheme);
                
                // Create CSS variables
                const root = document.documentElement;
                root.style.setProperty('--primary', colors[0]);
                root.style.setProperty('--secondary', colors[1]);
                root.style.setProperty('--accent', colors[2]);
                root.style.setProperty('--light', '#ffffff');
                root.style.setProperty('--dark', '#333333');
                root.style.setProperty('--bg-alt', '#f8f9fa');
                root.style.setProperty('--border', '#dee2e6');
                root.style.setProperty('--hover', '#e9ecef');
                root.style.setProperty('--font-family', fontFamily);
                root.style.setProperty('--border-radius', borderRadius);
                
                // Generate CSS output
                generateCSSOutput(colors, fontFamily, borderRadius);
            });
            
            // Generate CSS output
            function generateCSSOutput(colors, fontFamily, borderRadius) {
                const css = `:root {
  --primary: ${colors[0]};
  --secondary: ${colors[1]};
  --accent: ${colors[2]};
  --light: #ffffff;
  --dark: #333333;
  --bg-alt: #f8f9fa;
  --border: #dee2e6;
  --hover: #e9ecef;
  --font-family: ${fontFamily};
  --border-radius: ${borderRadius};
}

body {
  font-family: var(--font-family);
  color: var(--dark);
  background-color: var(--light);
}

.btn {
  border-radius: var(--border-radius);
}

.btn-primary {
  background-color: var(--primary);
  border-color: var(--primary);
}

.btn-secondary {
  background-color: var(--secondary);
  border-color: var(--secondary);
}

.table-theme {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
}

.table-theme th {
  background-color: var(--primary);
  color: var(--light);
  padding: 12px;
  text-align: left;
}

.table-theme tr:nth-child(even) {
  background-color: var(--light);
}

.table-theme tr:nth-child(odd) {
  background-color: var(--bg-alt);
}

.table-theme td {
  padding: 10px;
  border-bottom: 1px solid var(--border);
}

.table-theme tr:hover {
  background-color: var(--hover);
}

/* Add more component styles as needed */
`;
                cssOutput.value = css;
            }
            
            // Export CSS
            exportCSSBtn.addEventListener('click', function() {
                const css = cssOutput.value;
                if (css) {
                    const blob = new Blob([css], {type: 'text/css'});
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'theme.css';
                    a.click();
                    URL.revokeObjectURL(url);
                } else {
                    alert('Generate a theme first!');
                }
            });
            
            // Export as Component
            exportComponentBtn.addEventListener('click', function() {
                const css = cssOutput.value;
                if (css) {
                    // Create HTML for component
                    const componentHTML = `<!-- Theme Component -->
<div class="theme-component">
  <style>
    ${css}
  </style>
  <div class="theme-applied">
    <!-- Your themed content here -->
  </div>
</div>`;
                    
                    const blob = new Blob([componentHTML], {type: 'text/html'});
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'theme-component.html';
                    a.click();
                    URL.revokeObjectURL(url);
                } else {
                    alert('Generate a theme first!');
                }
            });
            
            // Make control panel draggable
            const controlPanel = document.getElementById('controlPanel');
            const panelHeader = controlPanel.querySelector('.panel-header');
            
            // Make the panel minimizable
            const minimizeBtn = document.getElementById('minimizePanel');
            minimizeBtn.addEventListener('click', function() {
                controlPanel.classList.toggle('minimized');
                if (controlPanel.classList.contains('minimized')) {
                    minimizeBtn.textContent = 'â–¡';
                    minimizeBtn.title = 'Restore';
                } else {
                    minimizeBtn.textContent = '_';
                    minimizeBtn.title = 'Minimize';
                }
            });
            
            // Draggable functionality
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            
            panelHeader.onmousedown = dragMouseDown;
            
            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                // Get the mouse cursor position at startup
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                // Call a function whenever the cursor moves
                document.onmousemove = elementDrag;
            }
            
            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                // Calculate the new cursor position
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                // Set the element's new position
                controlPanel.style.top = (controlPanel.offsetTop - pos2) + "px";
                controlPanel.style.left = (controlPanel.offsetLeft - pos1) + "px";
            }
            
            function closeDragElement() {
                // Stop moving when mouse button is released
                document.onmouseup = null;
                document.onmousemove = null;
            }
        });
    </script>
</body>
</html>