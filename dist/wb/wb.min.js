let isEditMode = false;let clickTimer = null;let clickCount = 0;let cfg = {build_settings: {obfuscate_js: false, minify_css: false, include_comments: true, development_mode: false }, export_settings: {copy_css_file: true, copy_js_file: true, embed_styles: false, embed_scripts: false }, file_settings: {css_filename: "wb.css", js_filename: "wb.min.js", html_prefix: "Sites_" }, advanced_settings: {remove_edit_indicators: true, clean_broken_images: true, add_smooth_scrolling: true, include_console_logs: true } };function handleEditableClick(event) {if (!isEditMode) return;event.preventDefault();event.stopPropagation();clickCount++;if (clickCount === 1) {clickTimer = setTimeout(() => {if (clickCount === 1) {event.target.focus();if (event.target.tagName === 'IMG') {event.target.style.outline = '3px solid #007acc'} updateStatus('Single click - selected. Double click to edit.', 'info')} clickCount = 0}, 300)} else if (clickCount === 2) {clearTimeout(clickTimer);clickCount = 0;if (event.target.tagName === 'IMG') {const input = document.createElement('input');input.type = 'file';input.accept = 'image .control-panel {display: none !important} .site-container {margin-right: 0 !important} .editable {outline: none !important;cursor: default !important} .editable:hover {outline: none !important} </style> </head> <body> <div class="site-container"> ${htmlContent} </div> </body> </html>`;try {const htmlBlob = new Blob([fullHTML], {type: 'text/html' });const htmlUrl = URL.createObjectURL(htmlBlob);const htmlLink = document.createElement('a');htmlLink.href = htmlUrl;htmlLink.download = `${cfg.file_settings.html_prefix}${currentSiteName}.html`;document.body.appendChild(htmlLink);htmlLink.click();document.body.removeChild(htmlLink);URL.revokeObjectURL(htmlUrl);updateStatus(`Website "${currentSiteName}" saved successfully!`, 'success')} catch (error) {console.error('Error saving website:', error);updateStatus('Error saving website files', 'error')} } function updateStatus(message, type = 'info') {const status = document.getElementById('status');if (!status) {console.log(`Status: ${message} (${type})`);return} status.textContent = message;status.className = 'status-indicator ' + type;setTimeout(() => {status.textContent = 'Ready';status.className = 'status-indicator'}, 3000)} document.addEventListener('DOMContentLoaded', async function() {console.log('DOM Content Loaded - initializing website builder');try {await loadConfiguration();initializeColorFineControls();updateStatus('Website Builder loaded - Ready to edit', 'success');const configInputs = ['obfuscate-js', 'copy-files', 'clean-html'];configInputs.forEach(id => {const element = document.getElementById(id);if (element) {element.addEventListener('change', saveConfiguration)} });const editToggle = document.getElementById('edit-toggle');const editables = document.querySelectorAll('.editable');console.log('Edit toggle button found:', !!editToggle);console.log('Editable elements found:', editables.length);console.log('Website Builder initialized successfully')} catch (error) {console.error('Error initializing website builder:', error);updateStatus('Error loading website builder', 'error')} });